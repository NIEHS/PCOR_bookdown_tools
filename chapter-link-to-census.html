<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Linkage to Census Units | CHORDS Training and Use Cases Toolkit</title>
  <meta name="description" content="The CHORDS Training and Use Cases Toolkit provides guides, tutorials, and example code to support climate change and human health research." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Linkage to Census Units | CHORDS Training and Use Cases Toolkit" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="The CHORDS Training and Use Cases Toolkit provides guides, tutorials, and example code to support climate change and human health research." />
  <meta name="github-repo" content="NIEHS/PCOR_bookdown_tools" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Linkage to Census Units | CHORDS Training and Use Cases Toolkit" />
  
  <meta name="twitter:description" content="The CHORDS Training and Use Cases Toolkit provides guides, tutorials, and example code to support climate change and human health research." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="health-data-integration.html"/>
<link rel="next" href="chapter-fhir-pit.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">CHORDS Training and Use Cases Toolkit</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><strong>Introduction</strong></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-chords"><i class="fa fa-check"></i>About CHORDS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-this-toolkit"><i class="fa fa-check"></i>About This Toolkit</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="unit-geospatial-foundations.html"><a href="unit-geospatial-foundations.html"><i class="fa fa-check"></i><strong>Geospatial Data Foundations</strong></a></li>
<li class="chapter" data-level="1" data-path="chapter-getting-started-spatial.html"><a href="chapter-getting-started-spatial.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chapter-getting-started-spatial.html"><a href="chapter-getting-started-spatial.html#introduction-1"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="chapter-getting-started-spatial.html"><a href="chapter-getting-started-spatial.html#concepts-and-terminology"><i class="fa fa-check"></i><b>1.2</b> Concepts and Terminology</a></li>
<li class="chapter" data-level="1.3" data-path="chapter-getting-started-spatial.html"><a href="chapter-getting-started-spatial.html#datasets"><i class="fa fa-check"></i><b>1.3</b> Datasets</a></li>
<li class="chapter" data-level="1.4" data-path="chapter-getting-started-spatial.html"><a href="chapter-getting-started-spatial.html#r-packages"><i class="fa fa-check"></i><b>1.4</b> <code>R</code> Packages</a></li>
<li class="chapter" data-level="1.5" data-path="chapter-getting-started-spatial.html"><a href="chapter-getting-started-spatial.html#chapter-getting-started-spatial-resources"><i class="fa fa-check"></i><b>1.5</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapter-point-data.html"><a href="chapter-point-data.html"><i class="fa fa-check"></i><b>2</b> Point Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chapter-point-data.html"><a href="chapter-point-data.html#introduction-2"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="chapter-point-data.html"><a href="chapter-point-data.html#access-download-and-unzip"><i class="fa fa-check"></i><b>2.2</b> Access, Download, and Unzip</a></li>
<li class="chapter" data-level="2.3" data-path="chapter-point-data.html"><a href="chapter-point-data.html#data-preparation"><i class="fa fa-check"></i><b>2.3</b> Data Preparation</a></li>
<li class="chapter" data-level="2.4" data-path="chapter-point-data.html"><a href="chapter-point-data.html#exploratory-analysis"><i class="fa fa-check"></i><b>2.4</b> Exploratory Analysis</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapter-polygon-data.html"><a href="chapter-polygon-data.html"><i class="fa fa-check"></i><b>3</b> Polygon Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapter-polygon-data.html"><a href="chapter-polygon-data.html#introduction-3"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="chapter-polygon-data.html"><a href="chapter-polygon-data.html#chapter-polygon-access"><i class="fa fa-check"></i><b>3.2</b> Access, Download, and Unzip</a></li>
<li class="chapter" data-level="3.3" data-path="chapter-polygon-data.html"><a href="chapter-polygon-data.html#data-preparation-with-sf"><i class="fa fa-check"></i><b>3.3</b> Data Preparation with <code>sf</code></a></li>
<li class="chapter" data-level="3.4" data-path="chapter-polygon-data.html"><a href="chapter-polygon-data.html#exploratory-analysis-with-sf"><i class="fa fa-check"></i><b>3.4</b> Exploratory Analysis with <code>sf</code></a></li>
<li class="chapter" data-level="3.5" data-path="chapter-polygon-data.html"><a href="chapter-polygon-data.html#data-preparation-with-terra"><i class="fa fa-check"></i><b>3.5</b> Data Preparation with <code>terra</code></a></li>
<li class="chapter" data-level="3.6" data-path="chapter-polygon-data.html"><a href="chapter-polygon-data.html#exploratory-analysis-with-terra"><i class="fa fa-check"></i><b>3.6</b> Exploratory Analysis with <code>terra</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chapter-raster-data.html"><a href="chapter-raster-data.html"><i class="fa fa-check"></i><b>4</b> Raster Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chapter-raster-data.html"><a href="chapter-raster-data.html#introduction-4"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="chapter-raster-data.html"><a href="chapter-raster-data.html#raster-access"><i class="fa fa-check"></i><b>4.2</b> Access and Download</a></li>
<li class="chapter" data-level="4.3" data-path="chapter-raster-data.html"><a href="chapter-raster-data.html#data-preparation-1"><i class="fa fa-check"></i><b>4.3</b> Data Preparation</a></li>
<li class="chapter" data-level="4.4" data-path="chapter-raster-data.html"><a href="chapter-raster-data.html#exploratory-analysis-1"><i class="fa fa-check"></i><b>4.4</b> Exploratory Analysis</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="wildfire-data.html"><a href="wildfire-data.html"><i class="fa fa-check"></i><strong>Wildfire Data</strong></a></li>
<li class="chapter" data-level="" data-path="other-environmental-data.html"><a href="other-environmental-data.html"><i class="fa fa-check"></i><strong>Other Environmental Data</strong></a></li>
<li class="chapter" data-level="5" data-path="chapter-nasa-earthdata.html"><a href="chapter-nasa-earthdata.html"><i class="fa fa-check"></i><b>5</b> NASA EarthData Download</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chapter-nasa-earthdata.html"><a href="chapter-nasa-earthdata.html#introduction-5"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="chapter-nasa-earthdata.html"><a href="chapter-nasa-earthdata.html#nasa-earthdata-account"><i class="fa fa-check"></i><b>5.2</b> NASA EarthData Account</a></li>
<li class="chapter" data-level="5.3" data-path="chapter-nasa-earthdata.html"><a href="chapter-nasa-earthdata.html#generate-prerequisite-files"><i class="fa fa-check"></i><b>5.3</b> Generate Prerequisite Files</a></li>
<li class="chapter" data-level="5.4" data-path="chapter-nasa-earthdata.html"><a href="chapter-nasa-earthdata.html#download-data"><i class="fa fa-check"></i><b>5.4</b> Download Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="health-data-integration.html"><a href="health-data-integration.html"><i class="fa fa-check"></i><strong>Health Data Integration</strong></a></li>
<li class="chapter" data-level="6" data-path="chapter-link-to-census.html"><a href="chapter-link-to-census.html"><i class="fa fa-check"></i><b>6</b> Linkage to Census Units</a>
<ul>
<li class="chapter" data-level="6.1" data-path="chapter-link-to-census.html"><a href="chapter-link-to-census.html#introduction-6"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="chapter-link-to-census.html"><a href="chapter-link-to-census.html#tutorial"><i class="fa fa-check"></i><b>6.2</b> Tutorial</a></li>
<li class="chapter" data-level="6.3" data-path="chapter-link-to-census.html"><a href="chapter-link-to-census.html#concluding-remarks"><i class="fa fa-check"></i><b>6.3</b> Concluding Remarks</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chapter-fhir-pit.html"><a href="chapter-fhir-pit.html"><i class="fa fa-check"></i><b>7</b> A FHIR PIT Tutorial</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chapter-fhir-pit.html"><a href="chapter-fhir-pit.html#introduction-7"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="chapter-fhir-pit.html"><a href="chapter-fhir-pit.html#tutorial-1"><i class="fa fa-check"></i><b>7.2</b> Tutorial</a></li>
<li class="chapter" data-level="7.3" data-path="chapter-fhir-pit.html"><a href="chapter-fhir-pit.html#fhir-pit-considerations"><i class="fa fa-check"></i><b>7.3</b> Considerations</a></li>
<li class="chapter" data-level="7.4" data-path="chapter-fhir-pit.html"><a href="chapter-fhir-pit.html#concluding-remarks-1"><i class="fa fa-check"></i><b>7.4</b> Concluding Remarks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="use-cases.html"><a href="use-cases.html"><i class="fa fa-check"></i><strong>Use Cases</strong></a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><strong>Appendix</strong></a></li>
<li class="chapter" data-level="" data-path="chapter-user-profiles.html"><a href="chapter-user-profiles.html"><i class="fa fa-check"></i><strong>A</strong> User Profiles</a></li>
<li class="chapter" data-level="" data-path="chords-glossary.html"><a href="chords-glossary.html"><i class="fa fa-check"></i><strong>B</strong> Glossary</a></li>
<li class="chapter" data-level="" data-path="all-references-appendix.html"><a href="all-references-appendix.html"><i class="fa fa-check"></i><strong>C</strong> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" 
target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CHORDS Training and Use Cases Toolkit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-link-to-census" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Linkage to Census Units<a href="chapter-link-to-census.html#chapter-link-to-census" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="chapter-user-profiles.html#profilecmp"><img src="images/user_profiles/profilecmp.svg" alt="Profile-CMP" /></a>
<a href="chapter-user-profiles.html#profilecdm"><img src="images/user_profiles/profilecdm.svg" alt="Profile-CDM" /></a>
<a href="chapter-user-profiles.html#profilechw"><img src="images/user_profiles/profilechw.svg" alt="Profile-CHW" /></a>
<a href="chapter-user-profiles.html#profilestu"><img src="images/user_profiles/profilestu.svg" alt="Profile-STU" /></a></p>
<div id="linking-geocoded-addresses-to-census-units-and-social-determinants-of-health-data-in-r" class="section level3 unnumbered hasAnchor">
<h3>Linking Geocoded Addresses to Census Units and Social Determinants of Health Data in R<a href="chapter-link-to-census.html#linking-geocoded-addresses-to-census-units-and-social-determinants-of-health-data-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Date Modified</strong>: September 13, 2023</p>
<p><strong>Author</strong>: Lara P. Clark <a href="https://orcid.org/0000-0001-6940-5442"><img src="images/orcid.png" width="10" alt="author-lpc" /></a></p>
<p><strong>Key Terms</strong>: <a href="https://tools.niehs.nih.gov/cchhglossary/?keyword=data+integration&amp;termOnlySearch=true&amp;exactSearch=true">Data Integration</a>, <a href="https://tools.niehs.nih.gov/cchhglossary/?keyword=social+determinants+of+health+(sdoh)&amp;termOnlySearch=true&amp;exactSearch=true">Social Determinants of Health</a>, <a href="chords-glossary.html#def-geocoded-address">Geocoded Address</a>, <a href="chords-glossary.html#def-geoid">GeoID</a>, <a href="chords-glossary.html#def-geographic-unit">Geographic Unit</a></p>
<p><strong>Programming Language</strong>: R</p>
</div>
<div id="introduction-6" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Introduction<a href="chapter-link-to-census.html#introduction-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This tutorial provides example code in <code>R</code>:</p>
<ol style="list-style-type: decimal">
<li><p>To link geocoded addresses (i.e., geographic coordinates) to the specific US Census geographic units (e.g., tract) in which they are located.</p></li>
<li><p>To link data from the Agency for Healthcare Research and Quality (AHRQ) Social Determinants of Health Database <span class="citation">(<a href="#ref-ahrq-sdoh-database">17</a>)</span> to those geocoded addresses.</p></li>
</ol>
<div id="motivation-2" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Motivation<a href="chapter-link-to-census.html#motivation-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Linking geocoded addresses to US Census geographic units is a common step in environmental health data integration workflows. First, using geographic information systems (GIS) software, the geocoded addresses are mapped to the specific Census geographic units (e.g., Census tracts) in which they are located. Second, the Census geographic unit identifying code (or, <a href="https://www.census.gov/programs-surveys/geography/guidance/geo-identifiers.html">geoID</a>) is matched to each geocoded address. The result is a table of geocoded addresses and their corresponding Census geoIDs.</p>
<p>The Census geoIDs can then serve as the basis for linking additional data to each geocoded address. Many types of data with importance for environmental health applications are available by Census geoID. Specifically, the Census collects and provides data by Census geoID for various social determinants of health (SDOH). Such Census SDOH data describe poverty, race/ethnicity, language, housing, and other socioeconomic characteristics. Increasingly, other data providers (e.g., other government agencies, research institutions, community science groups) are making their data available by Census geoID to help facilitate linkages with SDOH data. Such data cover various environment, climate, health, and built environment characteristics.</p>
<p>The following table lists example environmental health data sources readily available by Census geoID from US federal agencies.</p>
<figcaption>
Example Environmental Health Data Sources
</figcaption>
<table>
<colgroup>
<col width="31%" />
<col width="34%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Data source</th>
<th>Geographic units</th>
<th>Example topics</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://www.ahrq.gov/sdoh/data-analytics/sdoh-data.html">AHRQ Social Detrminants of Health Database</a></td>
<td>County, ZIP code, tract</td>
<td>Demographic characteristics, housing and transportation characteristics, food access, healthcare characteristics</td>
</tr>
<tr class="even">
<td><a href="https://www.epa.gov/ejscreen">EPA Environmental Justice Screening and Mapping Tool</a></td>
<td>Block group</td>
<td>Air pollution, hazardous waste, flood risk, wildfire risk, environmental justice indices</td>
</tr>
<tr class="odd">
<td><a href="https://ephtracking.cdc.gov">CDC National Environmental Public Health Tracking Network</a></td>
<td>State, county</td>
<td>Heat, sunlight and ultraviolet exposure, built environment characteristics, asthma, heat-related illnesses</td>
</tr>
</tbody>
</table>
</div>
<div id="intro-census-geoids" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Background<a href="chapter-link-to-census.html#intro-census-geoids" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The Census defines <a href="https://www.census.gov/newsroom/blogs/random-samplings/2014/07/understanding-geographic-relationships-counties-places-tracts-and-more.html">geographic boundaries</a> at various spatial scales. Common examples in environmental health workflows include (from coarsest to finest spatial scale): states, counties, tracts, block groups, and blocks. These boundaries are completely non-overlapping, such that block boundaries are nested within block groups, which are nested within tracts, which are nested within counties, which are nested within states.</p>
<p>The Census defines the boundaries of tracts and block groups to scale with local population: that is, in areas with higher population density (e.g., urban cores), these geographic units have finer spatial scale (i.e., smaller land area per unit) and in areas with lower population density (e.g., rural areas), the geographic units have coarser spatial scale (i.e., larger land area per unit). As a result, the spatial scale of geographic units varies substantially across the US. The shape of geographic units also varies substantially: the Census defines these boundaries to follow political boundaries (e.g., state boundaries) as well as physical features (e.g., roads, rivers), which often have irregular shapes.</p>
<div class="note">
<p>The variable shape and spatial scale of Census geographic units is in contrast with spatial grids– in which each geographic unit (i.e., grid cell) has the same shape and spatial resolution. Such spatial grids are common for environment and climate data.</p>
</div>
<p><a href="https://www.census.gov/programs-surveys/geography/guidance/geo-areas/zctas.html">ZIP Code Tabulation Areas (ZCTAs)</a>, which represent the geographic areas used by the US Postal Service for ZIP codes, are another common boundary used in environmental health workflows. ZCTAs have no spatial relationship with block groups, tracts, counties, or states: that is, ZCTAs can cross or overlap those other geographic boundaries. Like other Census geographic boundaries, ZCTAs vary in spatial resolution and shape across the US. The spatial scale of ZCTAs is, on average, finer than counties but coarser than tracts.</p>
<p>The following figure illustrates the variable spatial scale and shape of each type of geographic boundary:</p>
<div class="figure">
<img src="images/link_to_census/geography_durham_co.png" style="width:100%">
<figcaption>
Census Geographic Units in Durham County, North Carolina, in 2010
</figcaption>
</div>
<p>The Census assigns a unique identifying code, or <a href="https://www.census.gov/programs-surveys/geography/guidance/geo-identifiers.html">geoID</a>, to each geographic unit. This Census geoID is also referred to as a FIPS (Federal Information Processing Series) code.</p>
<p>The following table describes common types of Census geographic units and the structure of their geoIDs.</p>
<figcaption>
Common Census Geographic Units in the United States
</figcaption>
<table>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th>Geographic Unit</th>
<th>Total Units<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></th>
<th>GeoID Description and Structure</th>
<th>Example Unit GeoID</th>
<th>Example Unit Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>State</td>
<td>50</td>
<td>2-digit state (S) code = SS</td>
<td>09</td>
<td>Connecticut (CT)</td>
</tr>
<tr class="even">
<td>County</td>
<td>3143</td>
<td>5-digit code = 2-digit state (S) code + 3-digit county (C) code = SSCCC</td>
<td>09007</td>
<td>Middlesex County, CT</td>
</tr>
<tr class="odd">
<td>Zip Code Tabulation Area (ZCTA)</td>
<td>33,642</td>
<td>5-digit ZCTA (Z) code = ZZZZZ</td>
<td>06480</td>
<td>ZCTA for Portland, CT</td>
</tr>
<tr class="even">
<td>Tract</td>
<td>84,414</td>
<td>11-digit code = 2-digit state (S) code + 3 digit county (C) code + 6-digit tract (T) code = SSCCCTTTTTT</td>
<td>09007560100</td>
<td>Tract 560100 in Middlesex County, CT</td>
</tr>
<tr class="odd">
<td>Block group</td>
<td>239,780</td>
<td>12-digit code = 2-digit state (S) code + 3 digit county (C) code + 6-digit tract (T) code + 1-digit block group (G) code = SSCCCTTTTTTG</td>
<td>090075601001</td>
<td>Block group 1 in Tract 560100 in Middlesex County, CT</td>
</tr>
<tr class="even">
<td>Block</td>
<td>8,132,968</td>
<td>15-digit code = 2-digit state (S) code + 3 digit county (C) code + 6-digit tract (T) code + 4-digit block (B) code (which contains the block group code as its first digit) = SSCCCTTTTTTBBBB</td>
<td>090075601001004</td>
<td>Block 1004 in Tract 560100 in Middlesex County, CT</td>
</tr>
</tbody>
</table>
<div class="note">
<p>For states, counties, tracts, block groups, and blocks: the geoIDs for the finer spatial scale units are constructed from the geoIDs for the coarser spatial scale units in which they are located. This makes it possible to extract, for example, the tract geoID from the block geoID based on digit number.</p>
</div>
</div>
<div id="considerations" class="section level3 hasAnchor" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Considerations<a href="chapter-link-to-census.html#considerations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following are important considerations for linking geocoded addresses to Census geographic boundaries for environmental health applications.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Temporal Considerations</strong>: The Census <a href="https://www.census.gov/content/dam/Census/library/publications/2020/acs/acs_geography_handbook_2020_ch02.pdf">periodically updates its geographic boundaries</a>, such as tracts, block groups, and blocks. For example, the Census may add, remove, or modify specific geographic units (and associated geoIDs) as the population changes over time. Thus, it is important to select the correct years (or, <a href="https://www.census.gov/content/dam/Census/library/publications/2020/acs/acs_geography_handbook_2020_ch02.pdf">vintages</a>) of Census geographic boundaries needed for linking each data source of interest. For example, linking SDOH data provided for year-2010 vintage Census tract boundaries would require the year-2010 vintage of Census tract geoIDs for each geocoded address.</p></li>
<li><p><strong>Spatial Scale Considerations</strong>: The spatial scale of tracts, block groups, and blocks varies substantially across the US, with finer spatial scale in urban areas and coarser scale in rural areas. Thus, it is important to select the Census geographic boundary with appropriate spatial resolution for the specific environmental health application.</p></li>
<li><p><strong>Privacy Considerations</strong>: Various web-based geocoding tools support look-up of Census geoIDs by street addresses or geographic coordinates. However, such web-based tools require sending geolocation information over the internet, which can risk exposing private geolocation information. To meet data protection guidelines for environmental health applications, this tutorial instead uses a fully offline approach for handling geolocation information.</p></li>
</ol>
</div>
<div id="outline" class="section level3 hasAnchor" number="6.1.4">
<h3><span class="header-section-number">6.1.4</span> Outline<a href="chapter-link-to-census.html#outline" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This tutorial includes the following steps:</p>
<ol style="list-style-type: decimal">
<li><p><a href="chapter-link-to-census.html#link-to-census-step-0">Install R packages</a></p></li>
<li><p><a href="chapter-link-to-census.html#link-to-census-step-1">Prepare geocoded addresses</a></p></li>
<li><p><a href="chapter-link-to-census.html#link-to-census-step-2">Access Census geographic boundaries</a></p></li>
<li><p><a href="chapter-link-to-census.html#link-to-census-step-3">Link geocoded addresses to Census geographic boundaries</a></p></li>
<li><p><a href="chapter-link-to-census.html#link-to-census-step-4">Link AHRQ SDOH data to geocoded addresses</a></p></li>
</ol>
</div>
</div>
<div id="tutorial" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Tutorial<a href="chapter-link-to-census.html#tutorial" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="link-to-census-step-0" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Install R Packages<a href="chapter-link-to-census.html#link-to-census-step-0" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This tutorial uses the <code>R</code> packages <code>sf</code> <span class="citation">(<a href="#ref-r-sf-1">1</a>,<a href="#ref-r-sf-2">8</a>)</span>, <code>tidyverse</code> <span class="citation">(<a href="#ref-r-tidyverse">18</a>)</span>, <code>tigris</code> <span class="citation">(<a href="#ref-r-tigris">19</a>)</span>, and <code>tmap</code> <span class="citation">(<a href="#ref-r-tmap">20</a>)</span>. The following code installs and loads these packages:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="chapter-link-to-census.html#cb134-1" tabindex="-1"></a><span class="co"># install required packages</span></span>
<span id="cb134-2"><a href="chapter-link-to-census.html#cb134-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;sf&quot;</span>, <span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;tigris&quot;</span>, <span class="st">&quot;tmap&quot;</span>))</span>
<span id="cb134-3"><a href="chapter-link-to-census.html#cb134-3" tabindex="-1"></a></span>
<span id="cb134-4"><a href="chapter-link-to-census.html#cb134-4" tabindex="-1"></a><span class="co"># load required packages</span></span>
<span id="cb134-5"><a href="chapter-link-to-census.html#cb134-5" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb134-6"><a href="chapter-link-to-census.html#cb134-6" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb134-7"><a href="chapter-link-to-census.html#cb134-7" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb134-8"><a href="chapter-link-to-census.html#cb134-8" tabindex="-1"></a><span class="fu">library</span>(tmap)</span></code></pre></div>
</div>
<div id="link-to-census-step-1" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Prepare Geocoded Addresses<a href="chapter-link-to-census.html#link-to-census-step-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The first step is to prepare the geocoded addresses (i.e., geographic coordinates or latitude/longitude) for mapping in <code>R</code>.</p>
<p>For this tutorial, we will use sample public data to represent geocoded addresses of, for example, participants in a health cohort study. This sample public data will be the coordinates for the city halls of the five largest cities in North Carolina. These coordinates were identified by searching Google Maps. The following code reads these coordinates into a table in <code>R</code> with columns for <code>id</code>, <code>latitude</code>, and <code>longitude</code>:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="chapter-link-to-census.html#cb135-1" tabindex="-1"></a><span class="co"># create a table of sample public geocoded addresses</span></span>
<span id="cb135-2"><a href="chapter-link-to-census.html#cb135-2" tabindex="-1"></a>geo_addresses_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb135-3"><a href="chapter-link-to-census.html#cb135-3" tabindex="-1"></a>  <span class="at">id =</span> <span class="fu">c</span>(</span>
<span id="cb135-4"><a href="chapter-link-to-census.html#cb135-4" tabindex="-1"></a>    <span class="st">&quot;01-charlotte&quot;</span>,</span>
<span id="cb135-5"><a href="chapter-link-to-census.html#cb135-5" tabindex="-1"></a>    <span class="st">&quot;02-raleigh&quot;</span>,</span>
<span id="cb135-6"><a href="chapter-link-to-census.html#cb135-6" tabindex="-1"></a>    <span class="st">&quot;03-greensboro&quot;</span>,</span>
<span id="cb135-7"><a href="chapter-link-to-census.html#cb135-7" tabindex="-1"></a>    <span class="st">&quot;04-durham&quot;</span>,</span>
<span id="cb135-8"><a href="chapter-link-to-census.html#cb135-8" tabindex="-1"></a>    <span class="st">&quot;05-winston-salem&quot;</span></span>
<span id="cb135-9"><a href="chapter-link-to-census.html#cb135-9" tabindex="-1"></a>  ),</span>
<span id="cb135-10"><a href="chapter-link-to-census.html#cb135-10" tabindex="-1"></a>  <span class="at">latitude =</span> <span class="fu">c</span>(</span>
<span id="cb135-11"><a href="chapter-link-to-census.html#cb135-11" tabindex="-1"></a>    <span class="fl">35.21599030178876</span>,</span>
<span id="cb135-12"><a href="chapter-link-to-census.html#cb135-12" tabindex="-1"></a>    <span class="fl">35.78019493350421</span>,</span>
<span id="cb135-13"><a href="chapter-link-to-census.html#cb135-13" tabindex="-1"></a>    <span class="fl">36.07391214865624</span>,</span>
<span id="cb135-14"><a href="chapter-link-to-census.html#cb135-14" tabindex="-1"></a>    <span class="fl">35.99607916214782</span>,</span>
<span id="cb135-15"><a href="chapter-link-to-census.html#cb135-15" tabindex="-1"></a>    <span class="fl">36.09512361249636</span></span>
<span id="cb135-16"><a href="chapter-link-to-census.html#cb135-16" tabindex="-1"></a>  ),</span>
<span id="cb135-17"><a href="chapter-link-to-census.html#cb135-17" tabindex="-1"></a>  <span class="at">longitude =</span> <span class="fu">c</span>(</span>
<span id="cb135-18"><a href="chapter-link-to-census.html#cb135-18" tabindex="-1"></a>    <span class="sc">-</span><span class="fl">80.80170873958926</span>,</span>
<span id="cb135-19"><a href="chapter-link-to-census.html#cb135-19" tabindex="-1"></a>    <span class="sc">-</span><span class="fl">78.64278743612566</span>,</span>
<span id="cb135-20"><a href="chapter-link-to-census.html#cb135-20" tabindex="-1"></a>    <span class="sc">-</span><span class="fl">79.7883534467845</span>,</span>
<span id="cb135-21"><a href="chapter-link-to-census.html#cb135-21" tabindex="-1"></a>    <span class="sc">-</span><span class="fl">78.89907326845271</span>,</span>
<span id="cb135-22"><a href="chapter-link-to-census.html#cb135-22" tabindex="-1"></a>    <span class="sc">-</span><span class="fl">80.24283630316438</span></span>
<span id="cb135-23"><a href="chapter-link-to-census.html#cb135-23" tabindex="-1"></a>  )</span>
<span id="cb135-24"><a href="chapter-link-to-census.html#cb135-24" tabindex="-1"></a>)</span>
<span id="cb135-25"><a href="chapter-link-to-census.html#cb135-25" tabindex="-1"></a></span>
<span id="cb135-26"><a href="chapter-link-to-census.html#cb135-26" tabindex="-1"></a><span class="co"># view the table</span></span>
<span id="cb135-27"><a href="chapter-link-to-census.html#cb135-27" tabindex="-1"></a><span class="fu">print</span>(geo_addresses_tbl)</span></code></pre></div>
<p>Here is the table produced by the code above:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="chapter-link-to-census.html#cb136-1" tabindex="-1"></a><span class="co"># A tibble: 5 × 3</span></span>
<span id="cb136-2"><a href="chapter-link-to-census.html#cb136-2" tabindex="-1"></a><span class="co">#   id               latitude longitude</span></span>
<span id="cb136-3"><a href="chapter-link-to-census.html#cb136-3" tabindex="-1"></a><span class="co">#   &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb136-4"><a href="chapter-link-to-census.html#cb136-4" tabindex="-1"></a><span class="co"># 1 01-charlotte         35.2     -80.8</span></span>
<span id="cb136-5"><a href="chapter-link-to-census.html#cb136-5" tabindex="-1"></a><span class="co"># 2 02-raleigh           35.8     -78.6</span></span>
<span id="cb136-6"><a href="chapter-link-to-census.html#cb136-6" tabindex="-1"></a><span class="co"># 3 03-greensboro        36.1     -79.8</span></span>
<span id="cb136-7"><a href="chapter-link-to-census.html#cb136-7" tabindex="-1"></a><span class="co"># 4 04-durham            36.0     -78.9</span></span>
<span id="cb136-8"><a href="chapter-link-to-census.html#cb136-8" tabindex="-1"></a><span class="co"># 5 05-winston-salem     36.1     -80.2</span></span></code></pre></div>
<p>Next, we’ll transform this table to an explicitly spatial data type: <a href="https://r-spatial.github.io/sf/articles/sf1.html">simple features (sf)</a>. This will allow us to use the point locations for spatial analysis using the <code>sf</code> package in <code>R</code>.</p>
<p>To do this, we will need to specify the <a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/OverviewCoordinateReferenceSystems.pdf">coordinate reference system (CRS)</a> used for the city hall coordinates. For this example, we retrieved the city hall coordinates from Google Maps, which uses the <a href="https://developers.google.com/maps/documentation/javascript/coordinates">World Geodetic System 1984</a> (<code>WGS84</code>) CRS.</p>
<div class="note">
<p>If you need to find the coordinate reference system information for your geolocation data, here are a few places to look:</p>
<ul>
<li><p>Metadata for geolocation data</p></li>
<li><p>Documentation for geocoding method (e.g., geocoding software) or geolocation data collection method (e.g., GPS device)</p></li>
<li><p>General documentation for data provider</p></li>
</ul>
</div>
<p>There are multiple formats available in <code>R</code> for <a href="https://www.earthdatascience.org/courses/earth-analytics/spatial-data-r/understand-epsg-wkt-and-other-crs-definition-file-types/">specifying the CRS</a>: <code>proj4</code>, well known text (<code>wkt</code>), and European Petroleum Survey Group (<code>EPSG</code>) format <span class="citation">(<a href="#ref-wasser-lesson5">21</a>)</span>. Here, we will specify the <code>WGS84</code> CRS using the <code>EPSG</code> format, which is a 4-digit numeric identifying code. We can look up the <code>EPSG</code> code for <code>WGS84</code> by searching a <a href="https://spatialreference.org/ref/epsg/">spatial reference catalog</a>. There, we find that the <code>EPSG</code> code is<code>4326</code>.</p>
<p>The following code transforms the table of city hall locations to a simple features object:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="chapter-link-to-census.html#cb137-1" tabindex="-1"></a><span class="co"># transform table to simple features</span></span>
<span id="cb137-2"><a href="chapter-link-to-census.html#cb137-2" tabindex="-1"></a>geo_addresses_sf <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_as_sf</span>(geo_addresses_tbl,</span>
<span id="cb137-3"><a href="chapter-link-to-census.html#cb137-3" tabindex="-1"></a>  <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>),</span>
<span id="cb137-4"><a href="chapter-link-to-census.html#cb137-4" tabindex="-1"></a>  <span class="at">crs =</span> <span class="st">&quot;EPSG:4326&quot;</span></span>
<span id="cb137-5"><a href="chapter-link-to-census.html#cb137-5" tabindex="-1"></a>)</span>
<span id="cb137-6"><a href="chapter-link-to-census.html#cb137-6" tabindex="-1"></a></span>
<span id="cb137-7"><a href="chapter-link-to-census.html#cb137-7" tabindex="-1"></a><span class="co"># view simple features</span></span>
<span id="cb137-8"><a href="chapter-link-to-census.html#cb137-8" tabindex="-1"></a><span class="fu">print</span>(geo_addresses_sf)</span></code></pre></div>
<p>Here is the description of the simple features object produced by the code above:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="chapter-link-to-census.html#cb138-1" tabindex="-1"></a><span class="co"># Simple feature collection with 5 features and 1 field</span></span>
<span id="cb138-2"><a href="chapter-link-to-census.html#cb138-2" tabindex="-1"></a><span class="co"># Geometry type: POINT</span></span>
<span id="cb138-3"><a href="chapter-link-to-census.html#cb138-3" tabindex="-1"></a><span class="co"># Dimension:     XY</span></span>
<span id="cb138-4"><a href="chapter-link-to-census.html#cb138-4" tabindex="-1"></a><span class="co"># Bounding box:  xmin: -80.80171 ymin: 35.21599 xmax: -78.64279 ymax: 36.09512</span></span>
<span id="cb138-5"><a href="chapter-link-to-census.html#cb138-5" tabindex="-1"></a><span class="co"># Geodetic CRS:  WGS 84</span></span>
<span id="cb138-6"><a href="chapter-link-to-census.html#cb138-6" tabindex="-1"></a><span class="co"># # A tibble: 5 × 2</span></span>
<span id="cb138-7"><a href="chapter-link-to-census.html#cb138-7" tabindex="-1"></a><span class="co">#   id                           geometry</span></span>
<span id="cb138-8"><a href="chapter-link-to-census.html#cb138-8" tabindex="-1"></a><span class="co"># * &lt;chr&gt;                     &lt;POINT [°]&gt;</span></span>
<span id="cb138-9"><a href="chapter-link-to-census.html#cb138-9" tabindex="-1"></a><span class="co"># 1 01-charlotte     (-80.80171 35.21599)</span></span>
<span id="cb138-10"><a href="chapter-link-to-census.html#cb138-10" tabindex="-1"></a><span class="co"># 2 02-raleigh       (-78.64279 35.78019)</span></span>
<span id="cb138-11"><a href="chapter-link-to-census.html#cb138-11" tabindex="-1"></a><span class="co"># 3 03-greensboro    (-79.78835 36.07391)</span></span>
<span id="cb138-12"><a href="chapter-link-to-census.html#cb138-12" tabindex="-1"></a><span class="co"># 4 04-durham        (-78.89907 35.99608)</span></span>
<span id="cb138-13"><a href="chapter-link-to-census.html#cb138-13" tabindex="-1"></a><span class="co"># 5 05-winston-salem (-80.24284 36.09512)</span></span></code></pre></div>
<p>Now, we can see that each city hall has associated <code>geometry</code> in point format. We can also confirm that the correct CRS (<code>WGS84</code>) is now associated with the city hall locations.</p>
</div>
<div id="link-to-census-step-2" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Access Census Geographic Boundaries<a href="chapter-link-to-census.html#link-to-census-step-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The second step is to prepare the Census geographic boundaries for mapping in <code>R</code>. For this tutorial, we’ll use the <code>tigris</code> package to load the Census tract boundaries for North Carolina in year-2010 (i.e., year-2010 vintage). Using an <code>R</code> package like <code>tigris</code> to load the Census geographic boundaries will help keep the workflow reproducible by documenting all of the steps in <code>R</code>. The following code reads the North Carolina 2010 Census tract boundaries into <code>R</code> as simple features:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="chapter-link-to-census.html#cb139-1" tabindex="-1"></a><span class="co"># download Census tracts in North Carolina in 2010 as simple features</span></span>
<span id="cb139-2"><a href="chapter-link-to-census.html#cb139-2" tabindex="-1"></a>nc_tracts_2010_sf <span class="ot">&lt;-</span> tigris<span class="sc">::</span><span class="fu">tracts</span>(<span class="at">state =</span> <span class="st">&quot;NC&quot;</span>, <span class="at">year =</span> <span class="dv">2010</span>)</span>
<span id="cb139-3"><a href="chapter-link-to-census.html#cb139-3" tabindex="-1"></a></span>
<span id="cb139-4"><a href="chapter-link-to-census.html#cb139-4" tabindex="-1"></a><span class="co"># view the first several rows of the Census tracts simple features</span></span>
<span id="cb139-5"><a href="chapter-link-to-census.html#cb139-5" tabindex="-1"></a><span class="fu">head</span>(nc_tracts_2010_sf)</span></code></pre></div>
<p>Here is the description of the simple features object produced by the code above:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="chapter-link-to-census.html#cb140-1" tabindex="-1"></a><span class="co"># Simple feature collection with 6 features and 14 fields</span></span>
<span id="cb140-2"><a href="chapter-link-to-census.html#cb140-2" tabindex="-1"></a><span class="co"># Geometry type: MULTIPOLYGON</span></span>
<span id="cb140-3"><a href="chapter-link-to-census.html#cb140-3" tabindex="-1"></a><span class="co"># Dimension:     XY</span></span>
<span id="cb140-4"><a href="chapter-link-to-census.html#cb140-4" tabindex="-1"></a><span class="co"># Bounding box:  xmin: -80.07571 ymin: 34.80499 xmax: -79.45918 ymax: 35.18342</span></span>
<span id="cb140-5"><a href="chapter-link-to-census.html#cb140-5" tabindex="-1"></a><span class="co"># Geodetic CRS:  NAD83</span></span>
<span id="cb140-6"><a href="chapter-link-to-census.html#cb140-6" tabindex="-1"></a><span class="co">#   STATEFP10 COUNTYFP10 TRACTCE10     GEOID10 NAME10        NAMELSAD10 MTFCC10</span></span>
<span id="cb140-7"><a href="chapter-link-to-census.html#cb140-7" tabindex="-1"></a><span class="co"># 1        37        153    970100 37153970100   9701 Census Tract 9701   G5020</span></span>
<span id="cb140-8"><a href="chapter-link-to-census.html#cb140-8" tabindex="-1"></a><span class="co"># 2        37        153    970200 37153970200   9702 Census Tract 9702   G5020</span></span>
<span id="cb140-9"><a href="chapter-link-to-census.html#cb140-9" tabindex="-1"></a><span class="co"># 3        37        153    970800 37153970800   9708 Census Tract 9708   G5020</span></span>
<span id="cb140-10"><a href="chapter-link-to-census.html#cb140-10" tabindex="-1"></a><span class="co"># 4        37        153    970900 37153970900   9709 Census Tract 9709   G5020</span></span>
<span id="cb140-11"><a href="chapter-link-to-census.html#cb140-11" tabindex="-1"></a><span class="co"># 5        37        153    971000 37153971000   9710 Census Tract 9710   G5020</span></span>
<span id="cb140-12"><a href="chapter-link-to-census.html#cb140-12" tabindex="-1"></a><span class="co"># 6        37        153    971100 37153971100   9711 Census Tract 9711   G5020</span></span>
<span id="cb140-13"><a href="chapter-link-to-census.html#cb140-13" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb140-14"><a href="chapter-link-to-census.html#cb140-14" tabindex="-1"></a><span class="co">#   FUNCSTAT10   ALAND10 AWATER10  INTPTLAT10   INTPTLON10</span></span>
<span id="cb140-15"><a href="chapter-link-to-census.html#cb140-15" tabindex="-1"></a><span class="co"># 1          S 246281647  2106825 +35.0503203 -079.6180454</span></span>
<span id="cb140-16"><a href="chapter-link-to-census.html#cb140-16" tabindex="-1"></a><span class="co"># 2          S 457736198  7835811 +35.0967892 -079.8225512</span></span>
<span id="cb140-17"><a href="chapter-link-to-census.html#cb140-17" tabindex="-1"></a><span class="co"># 3          S 139358521  2752112 +34.8508484 -079.8201950</span></span>
<span id="cb140-18"><a href="chapter-link-to-census.html#cb140-18" tabindex="-1"></a><span class="co"># 4          S  23311020    78240 +34.8785679 -079.7346295</span></span>
<span id="cb140-19"><a href="chapter-link-to-census.html#cb140-19" tabindex="-1"></a><span class="co"># 5          S  49233222   188190 +34.9395795 -079.6628977</span></span>
<span id="cb140-20"><a href="chapter-link-to-census.html#cb140-20" tabindex="-1"></a><span class="co"># 6.         S 161136716   948938 +34.8751742 -079.6567146</span></span>
<span id="cb140-21"><a href="chapter-link-to-census.html#cb140-21" tabindex="-1"></a><span class="co">#                         geometry COUNTYFP STATEFP</span></span>
<span id="cb140-22"><a href="chapter-link-to-census.html#cb140-22" tabindex="-1"></a><span class="co"># 1 MULTIPOLYGON (((-79.56729 3...      153      37</span></span>
<span id="cb140-23"><a href="chapter-link-to-census.html#cb140-23" tabindex="-1"></a><span class="co"># 2 MULTIPOLYGON (((-79.71753 3...      153      37</span></span>
<span id="cb140-24"><a href="chapter-link-to-census.html#cb140-24" tabindex="-1"></a><span class="co"># 3 MULTIPOLYGON (((-79.76773 3...      153      37</span></span>
<span id="cb140-25"><a href="chapter-link-to-census.html#cb140-25" tabindex="-1"></a><span class="co"># 4 MULTIPOLYGON (((-79.76773 3...      153      37</span></span>
<span id="cb140-26"><a href="chapter-link-to-census.html#cb140-26" tabindex="-1"></a><span class="co"># 5 MULTIPOLYGON (((-79.69038 3...      153      37</span></span>
<span id="cb140-27"><a href="chapter-link-to-census.html#cb140-27" tabindex="-1"></a><span class="co"># 6 MULTIPOLYGON (((-79.5684 34...      153      37</span></span></code></pre></div>
<p>Each tract has associated <code>geometry</code> in polygon format plus 14 additional attributes (i.e., variables, columns). Importantly, the Census tract geoID (i.e., <a href="chapter-link-to-census.html#intro-census-geoids">11-digit identifying code</a>) for year-2010 is stored in the column <code>GEOID10</code>.</p>
<p>We can see that the CRS listed above for the Census tract boundaries (<code>NAD83</code>) is different from the CRS for the city hall locations (<code>WGS84</code>). This will be important for the <a href="chapter-link-to-census.html#link-to-census-step-3">linkage step</a>.</p>
<p>Next, we can view the geometry of the tracts by creating a map:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="chapter-link-to-census.html#cb141-1" tabindex="-1"></a><span class="co"># create a map of the Census tracts</span></span>
<span id="cb141-2"><a href="chapter-link-to-census.html#cb141-2" tabindex="-1"></a>nc_tracts_2010_map <span class="ot">&lt;-</span> tmap<span class="sc">::</span><span class="fu">tm_shape</span>(nc_tracts_2010_sf) <span class="sc">+</span></span>
<span id="cb141-3"><a href="chapter-link-to-census.html#cb141-3" tabindex="-1"></a>  tmap<span class="sc">::</span><span class="fu">tm_polygons</span>(<span class="at">lwd =</span> <span class="fl">0.5</span>)</span>
<span id="cb141-4"><a href="chapter-link-to-census.html#cb141-4" tabindex="-1"></a></span>
<span id="cb141-5"><a href="chapter-link-to-census.html#cb141-5" tabindex="-1"></a><span class="co"># view the map</span></span>
<span id="cb141-6"><a href="chapter-link-to-census.html#cb141-6" tabindex="-1"></a><span class="fu">print</span>(nc_tracts_2010_map)</span></code></pre></div>
<div class="figure">
<img src="images/link_to_census/nc_tracts_2010_map.png" style="width:100%">
<figcaption>
Census Tracts in North Carolina in 2010
</figcaption>
</div>
<p>Other <a href="https://github.com/walkerke/tigris">types and vintages of Census geographic boundaries</a> are available through <code>tigris</code> and the related <code>tidycensus</code> package <span class="citation">(<a href="#ref-r-tidycensus">22</a>)</span>. In most cases, these boundaries are available for recent years (i.e., 1990 to present) and are accessed by state (i.e., users can download geographic boundaries for one state at a time, in separate files).</p>
<p>Census geographic boundaries are also available to download by state for years 2007 to present via the Census TIGER/Lines website <span class="citation">(<a href="#ref-census-tiger-line-shapefiles">23</a>)</span>.</p>
<p>Historic Census geographic boundaries (i.e., 1910 to present) are available through <a href="https://www.nhgis.org">IPUMS NHGIS</a> <span class="citation">(<a href="#ref-ipums-nhgis">24</a>)</span>. Additionally, IPUMS NHGIS provides many boundaries at the national scale (i.e., such that users can download geographic boundaries for the entire US in a single file). Here is an <a href="https://walker-data.com/census-r/other-census-and-government-data-resources.html#mapping-historical-geographies-of-new-york-city-with-nhgis">example workflow</a> for accessing historic Census geographic boundaries via IPUMS NHGIS in <code>R</code> <span class="citation">(<a href="#ref-walker2023analyzing">25</a>)</span>.</p>
</div>
<div id="link-to-census-step-3" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Link Geocoded Addresses to Census Geographic Boundaries<a href="chapter-link-to-census.html#link-to-census-step-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The third step is to link each geocoded addresses to the geoID of the Census geographic unit that contains it. To do this, we’ll first need to prepare the geocoded addresses and Census geographic boundaries in the same CRS. The following code transforms the CRS of the geocoded addresses to match the the CRS of the Census geographic boundaries (<code>NAD83</code>) and then maps them together:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="chapter-link-to-census.html#cb142-1" tabindex="-1"></a><span class="co"># transform city hall locations to match CRS of Census tracts</span></span>
<span id="cb142-2"><a href="chapter-link-to-census.html#cb142-2" tabindex="-1"></a>geo_addresses_crs_sf <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_transform</span>(geo_addresses_sf,</span>
<span id="cb142-3"><a href="chapter-link-to-census.html#cb142-3" tabindex="-1"></a>  <span class="at">crs =</span> sf<span class="sc">::</span><span class="fu">st_crs</span>(nc_tracts_2010_sf)</span>
<span id="cb142-4"><a href="chapter-link-to-census.html#cb142-4" tabindex="-1"></a>)</span>
<span id="cb142-5"><a href="chapter-link-to-census.html#cb142-5" tabindex="-1"></a></span>
<span id="cb142-6"><a href="chapter-link-to-census.html#cb142-6" tabindex="-1"></a><span class="co"># create a map of the Census tracts with the city hall locations</span></span>
<span id="cb142-7"><a href="chapter-link-to-census.html#cb142-7" tabindex="-1"></a>linkage_map <span class="ot">&lt;-</span> tmap<span class="sc">::</span><span class="fu">tm_shape</span>(nc_tracts_2010_sf) <span class="sc">+</span></span>
<span id="cb142-8"><a href="chapter-link-to-census.html#cb142-8" tabindex="-1"></a>  tmap<span class="sc">::</span><span class="fu">tm_polygons</span>(<span class="at">lwd =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb142-9"><a href="chapter-link-to-census.html#cb142-9" tabindex="-1"></a>  tmap<span class="sc">::</span><span class="fu">tm_shape</span>(geo_addresses_crs_sf) <span class="sc">+</span></span>
<span id="cb142-10"><a href="chapter-link-to-census.html#cb142-10" tabindex="-1"></a>  tmap<span class="sc">::</span><span class="fu">tm_dots</span>(</span>
<span id="cb142-11"><a href="chapter-link-to-census.html#cb142-11" tabindex="-1"></a>    <span class="at">col =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb142-12"><a href="chapter-link-to-census.html#cb142-12" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">0.25</span></span>
<span id="cb142-13"><a href="chapter-link-to-census.html#cb142-13" tabindex="-1"></a>  )</span>
<span id="cb142-14"><a href="chapter-link-to-census.html#cb142-14" tabindex="-1"></a></span>
<span id="cb142-15"><a href="chapter-link-to-census.html#cb142-15" tabindex="-1"></a><span class="co"># view the map</span></span>
<span id="cb142-16"><a href="chapter-link-to-census.html#cb142-16" tabindex="-1"></a><span class="fu">print</span>(linkage_map)</span></code></pre></div>
<div class="figure">
<img src="images/link_to_census/linkage_map.png" style="width:100%">
<figcaption>
Census Tracts in North Carolina in 2010 (Grey) with Sample Geocoded Addresses (Red)
</figcaption>
</div>
<p>Now that the geocoded addresses and Census tracts are in the same CRS, we can link each geocoded address to the Census tract that contains it using a spatial join. The following code produces a table of geocoded addresses linked to Census tract geoIDs:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="chapter-link-to-census.html#cb143-1" tabindex="-1"></a><span class="co"># link geocoded addresses to the Census tracts that contain them</span></span>
<span id="cb143-2"><a href="chapter-link-to-census.html#cb143-2" tabindex="-1"></a>geo_addresses_linkage_sf <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_join</span>(geo_addresses_crs_sf,</span>
<span id="cb143-3"><a href="chapter-link-to-census.html#cb143-3" tabindex="-1"></a>                                        nc_tracts_2010_sf,</span>
<span id="cb143-4"><a href="chapter-link-to-census.html#cb143-4" tabindex="-1"></a>                                        <span class="at">left =</span> <span class="cn">TRUE</span>)</span>
<span id="cb143-5"><a href="chapter-link-to-census.html#cb143-5" tabindex="-1"></a></span>
<span id="cb143-6"><a href="chapter-link-to-census.html#cb143-6" tabindex="-1"></a><span class="co"># create linked table with geocoded addresses id paired with Census tract geoID</span></span>
<span id="cb143-7"><a href="chapter-link-to-census.html#cb143-7" tabindex="-1"></a>geo_addresses_linkage_tbl <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_drop_geometry</span>(geo_addresses_linkage_sf) <span class="sc">%&gt;%</span></span>
<span id="cb143-8"><a href="chapter-link-to-census.html#cb143-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">geoid_tract_2010 =</span> GEOID10) <span class="sc">%&gt;%</span></span>
<span id="cb143-9"><a href="chapter-link-to-census.html#cb143-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, geoid_tract_2010)</span>
<span id="cb143-10"><a href="chapter-link-to-census.html#cb143-10" tabindex="-1"></a></span>
<span id="cb143-11"><a href="chapter-link-to-census.html#cb143-11" tabindex="-1"></a><span class="co"># write linked table to CSV file</span></span>
<span id="cb143-12"><a href="chapter-link-to-census.html#cb143-12" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(geo_addresses_linkage_tbl,</span>
<span id="cb143-13"><a href="chapter-link-to-census.html#cb143-13" tabindex="-1"></a>                 <span class="st">&quot;city_hall_census_tract_2010_linkage.csv&quot;</span>)</span>
<span id="cb143-14"><a href="chapter-link-to-census.html#cb143-14" tabindex="-1"></a></span>
<span id="cb143-15"><a href="chapter-link-to-census.html#cb143-15" tabindex="-1"></a><span class="co"># view the linked table</span></span>
<span id="cb143-16"><a href="chapter-link-to-census.html#cb143-16" tabindex="-1"></a><span class="fu">print</span>(geo_addresses_linkage_tbl)</span></code></pre></div>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="chapter-link-to-census.html#cb144-1" tabindex="-1"></a><span class="co"># A tibble: 5 × 2</span></span>
<span id="cb144-2"><a href="chapter-link-to-census.html#cb144-2" tabindex="-1"></a><span class="co">#   id               geoid_tract_2010</span></span>
<span id="cb144-3"><a href="chapter-link-to-census.html#cb144-3" tabindex="-1"></a><span class="co">#   &lt;chr&gt;            &lt;chr&gt;</span></span>
<span id="cb144-4"><a href="chapter-link-to-census.html#cb144-4" tabindex="-1"></a><span class="co"># 1 01-charlotte     37119001100</span></span>
<span id="cb144-5"><a href="chapter-link-to-census.html#cb144-5" tabindex="-1"></a><span class="co"># 2 02-raleigh       37183050100</span></span>
<span id="cb144-6"><a href="chapter-link-to-census.html#cb144-6" tabindex="-1"></a><span class="co"># 3 03-greensboro    37081010800</span></span>
<span id="cb144-7"><a href="chapter-link-to-census.html#cb144-7" tabindex="-1"></a><span class="co"># 4 04-durham        37063002200</span></span>
<span id="cb144-8"><a href="chapter-link-to-census.html#cb144-8" tabindex="-1"></a><span class="co"># 5 05-winston-salem 37067000100</span></span></code></pre></div>
</div>
<div id="link-to-census-step-4" class="section level3 hasAnchor" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> Link AHRQ SDOH Data to Geocoded Addresses<a href="chapter-link-to-census.html#link-to-census-step-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The fourth step is to link the AHRQ SDOH data to each geocoded address based on the Census geoID.</p>
<p>To start, we’ll need to prepare the AHRQ SDOH data for Census tracts. This data is available to download as an Excel (XLSX) spreadsheet on the <a href="https://www.ahrq.gov/sdoh/data-analytics/sdoh-data.html">AHRQ SDOH website</a> as shown in this screenshot:</p>
<div class="figure">
<img src="images/link_to_census/screenshot_sdoh_table.png" style="width:100%">
<figcaption>
Screenshot of AHRQ SDOH Website (September 13, 2023)
</figcaption>
</div>
<p>Before linking, we’ll need to check the vintage of Census tracts used in the AHRQ SDOH data. To do this, we can review the AHRQ SDOH <a href="https://www.ahrq.gov/sites/default/files/wysiwyg/sdoh/SDOH-Data-Sources-Documentation-v1-Final.pdf">Data Source Documentation</a> (accessed through the link shown in the website screenshot above). There we find the following information:</p>
<blockquote>
<p>The SDOH Database 2009 file has census tracts based on the 2000 census tract boundaries. The SDOH Database for 2010-2019 SDOH files uses 2010 census tract boundaries, and the 2020 file uses 2020 census tract boundaries.</p>
</blockquote>
<p>Based on this information, we can use the geoIDs for year-2010 vintage Census tracts we prepared for the geocoded addresses in the previous <a href="chapter-link-to-census.html#link-to-census-step-3">step</a> to link the AHRQ SDOH data for years 2010-2019. If we would instead prefer to link the AHRQ SDOH data for year 2009 or 2020, we would first need to repeat the previous <a href="chapter-link-to-census.html#link-to-census-step-2">steps</a> to link the geoIDs for year-2000 vintage or year-2020 vintage Census tracts, respectively, to the geocoded addresses.</p>
<p>For this example, we will link the AHRQ SDOH data for Census tracts in 2010 to our sample geocoded addresses on the basis of the year-2010 Census tract geoID. The SDOH AHRQ data for Census tracts in 2010 is provided as an Excel file. Because Excel files can contain multiple sheets, we’ll need to first download and open the Excel file to understand which sheet(s) to read into <code>R</code>:</p>
<div class="figure">
<img src="images/link_to_census/screenshot_sdoh_xls_1.png" style="width:100%">
<figcaption>
Screenshot of First Sheet in Excel File (September 14, 2023)
</figcaption>
</div>
<div class="figure">
<img src="images/link_to_census/screenshot_sdoh_xls_2.png" style="width:100%">
<figcaption>
Screenshot of Second Sheet in Excel File (September 14, 2023)
</figcaption>
</div>
<p>We find that the Excel file has two sheets: <code>Layout</code> and <code>Data</code>. The <code>Layout</code> sheet contains the data dictionary. The <code>Data</code> sheet contains &gt;300 columns of SDOH data by geoID for the &gt;70,000 Census tracts in the US in 2010.</p>
<p>The following code downloads the Excel file and reads its <code>Data</code> sheet into a table in <code>R</code>:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="chapter-link-to-census.html#cb145-1" tabindex="-1"></a><span class="co"># download Excel file using the URL provided in the screenshot above</span></span>
<span id="cb145-2"><a href="chapter-link-to-census.html#cb145-2" tabindex="-1"></a>sdoh_tracts_2010_url <span class="ot">&lt;-</span></span>
<span id="cb145-3"><a href="chapter-link-to-census.html#cb145-3" tabindex="-1"></a>  <span class="st">&quot;https://www.ahrq.gov/downloads/sdoh/sdoh_2010_tract_1_0.xlsx&quot;</span></span>
<span id="cb145-4"><a href="chapter-link-to-census.html#cb145-4" tabindex="-1"></a><span class="fu">download.file</span>(sdoh_tracts_2010_url, <span class="at">destfile =</span> <span class="st">&quot;sdoh_2010_tract_1_0.xlsx&quot;</span>)</span>
<span id="cb145-5"><a href="chapter-link-to-census.html#cb145-5" tabindex="-1"></a></span>
<span id="cb145-6"><a href="chapter-link-to-census.html#cb145-6" tabindex="-1"></a><span class="co"># read the &quot;Data&quot; sheet of the Excel file into a table R</span></span>
<span id="cb145-7"><a href="chapter-link-to-census.html#cb145-7" tabindex="-1"></a><span class="co"># note that you may need to provide a complete filepath for the Excel file</span></span>
<span id="cb145-8"><a href="chapter-link-to-census.html#cb145-8" tabindex="-1"></a>sdoh_tracts_2010_tbl <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(<span class="st">&quot;sdoh_2010_tract_1_0.xlsx&quot;</span>,</span>
<span id="cb145-9"><a href="chapter-link-to-census.html#cb145-9" tabindex="-1"></a>                                          <span class="at">sheet =</span> <span class="st">&quot;Data&quot;</span>)</span>
<span id="cb145-10"><a href="chapter-link-to-census.html#cb145-10" tabindex="-1"></a></span>
<span id="cb145-11"><a href="chapter-link-to-census.html#cb145-11" tabindex="-1"></a><span class="co"># view the table</span></span>
<span id="cb145-12"><a href="chapter-link-to-census.html#cb145-12" tabindex="-1"></a><span class="fu">head</span>(sdoh_tracts_2010_tbl)</span></code></pre></div>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="chapter-link-to-census.html#cb146-1" tabindex="-1"></a><span class="co"># A tibble: 6 × 355</span></span>
<span id="cb146-2"><a href="chapter-link-to-census.html#cb146-2" tabindex="-1"></a><span class="co">#    YEAR TRACTFIPS   COUNTYFIPS STATEFIPS STATE   COUNTY         REGION</span></span>
<span id="cb146-3"><a href="chapter-link-to-census.html#cb146-3" tabindex="-1"></a><span class="co">#   &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt;</span></span>
<span id="cb146-4"><a href="chapter-link-to-census.html#cb146-4" tabindex="-1"></a><span class="co"># 1  2010 01001020100 01001      01        Alabama Autauga County South</span></span>
<span id="cb146-5"><a href="chapter-link-to-census.html#cb146-5" tabindex="-1"></a><span class="co"># 2  2010 01001020200 01001      01        Alabama Autauga County South</span></span>
<span id="cb146-6"><a href="chapter-link-to-census.html#cb146-6" tabindex="-1"></a><span class="co"># 3  2010 01001020300 01001      01        Alabama Autauga County South</span></span>
<span id="cb146-7"><a href="chapter-link-to-census.html#cb146-7" tabindex="-1"></a><span class="co"># 4  2010 01001020400 01001      01        Alabama Autauga County South</span></span>
<span id="cb146-8"><a href="chapter-link-to-census.html#cb146-8" tabindex="-1"></a><span class="co"># 5  2010 01001020500 01001      01        Alabama Autauga County South</span></span>
<span id="cb146-9"><a href="chapter-link-to-census.html#cb146-9" tabindex="-1"></a><span class="co"># 6  2010 01001020600 01001      01        Alabama Autauga County South</span></span>
<span id="cb146-10"><a href="chapter-link-to-census.html#cb146-10" tabindex="-1"></a><span class="co"># ℹ 348 more variables: TERRITORY &lt;dbl&gt;, ACS_TOT_POP_WT &lt;dbl&gt;,</span></span>
<span id="cb146-11"><a href="chapter-link-to-census.html#cb146-11" tabindex="-1"></a><span class="co">#   ACS_TOT_POP_US_ABOVE1 &lt;dbl&gt;, ACS_TOT_POP_ABOVE5 &lt;dbl&gt;,</span></span>
<span id="cb146-12"><a href="chapter-link-to-census.html#cb146-12" tabindex="-1"></a><span class="co">#   ACS_TOT_POP_ABOVE15 &lt;dbl&gt;, ACS_TOT_POP_ABOVE16 &lt;dbl&gt;, …</span></span>
<span id="cb146-13"><a href="chapter-link-to-census.html#cb146-13" tabindex="-1"></a><span class="co"># ℹ Use `colnames()` to see all variable names</span></span></code></pre></div>
<p>We can see that the variable <code>TRACTFIPS</code> contains the 11-digit geoID for Census tracts in character format, which matches the geoID format we prepared in the previous <a href="chapter-link-to-census.html#link-to-census-step-3">step</a> .</p>
<div class="note">
<p>For linkages based on geoID, it is important to check that the geoID is in the same format across data sources. We recommend using character format (rather than numeric format) for Census geoIDs. This will preserve padded zeroes in geoIDs (e.g., state geoID for Alabama is <code>01</code> rather than <code>1</code>) such that each type of geoID has the expected number of digits (e.g., 2-digits for state geoID).</p>
</div>
<p>For this example, we can choose to link the following sample of SDOH variables identified by exploring the <code>Layout</code> sheet:</p>
<ul>
<li><p><code>ACS_PCT_INC50</code>: Percentage of population with income to poverty ratio under 0.50</p></li>
<li><p><code>POS_DIST_ED_TRACT</code>: Distance in miles to the nearest emergency department, calculated using population weighted tract centroids</p></li>
<li><p><code>ACS_PCT_HU_NO_VEH</code>: Percentage of housing units with no vehicle available</p></li>
</ul>
<p>The following code joins those SDOH data variables to the geocoded addresses based on the Census tract geoID:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="chapter-link-to-census.html#cb147-1" tabindex="-1"></a><span class="co"># rename geoID in SDOH table to match the geoID in the geocoded addresses table</span></span>
<span id="cb147-2"><a href="chapter-link-to-census.html#cb147-2" tabindex="-1"></a><span class="co"># select the SDOH variables of interest</span></span>
<span id="cb147-3"><a href="chapter-link-to-census.html#cb147-3" tabindex="-1"></a>sdoh_tracts_2010_tbl <span class="ot">&lt;-</span> sdoh_tracts_2010_tbl <span class="sc">%&gt;%</span></span>
<span id="cb147-4"><a href="chapter-link-to-census.html#cb147-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">geoid_tract_2010 =</span> TRACTFIPS) <span class="sc">%&gt;%</span></span>
<span id="cb147-5"><a href="chapter-link-to-census.html#cb147-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(geoid_tract_2010,</span>
<span id="cb147-6"><a href="chapter-link-to-census.html#cb147-6" tabindex="-1"></a>                ACS_PCT_INC50,</span>
<span id="cb147-7"><a href="chapter-link-to-census.html#cb147-7" tabindex="-1"></a>                POS_DIST_ED_TRACT,</span>
<span id="cb147-8"><a href="chapter-link-to-census.html#cb147-8" tabindex="-1"></a>                ACS_PCT_HU_NO_VEH)</span>
<span id="cb147-9"><a href="chapter-link-to-census.html#cb147-9" tabindex="-1"></a></span>
<span id="cb147-10"><a href="chapter-link-to-census.html#cb147-10" tabindex="-1"></a><span class="co"># join the SDOH table to the geocoded addresses based on geoID</span></span>
<span id="cb147-11"><a href="chapter-link-to-census.html#cb147-11" tabindex="-1"></a>geo_addresses_sdoh_tbl <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(geo_addresses_linkage_tbl,</span>
<span id="cb147-12"><a href="chapter-link-to-census.html#cb147-12" tabindex="-1"></a>                                           sdoh_tracts_2010_tbl,</span>
<span id="cb147-13"><a href="chapter-link-to-census.html#cb147-13" tabindex="-1"></a>                                           <span class="at">by =</span> <span class="st">&quot;geoid_tract_2010&quot;</span>)</span>
<span id="cb147-14"><a href="chapter-link-to-census.html#cb147-14" tabindex="-1"></a></span>
<span id="cb147-15"><a href="chapter-link-to-census.html#cb147-15" tabindex="-1"></a><span class="co"># view the resulting linked table</span></span>
<span id="cb147-16"><a href="chapter-link-to-census.html#cb147-16" tabindex="-1"></a><span class="fu">print</span>(geo_addresses_sdoh_tbl)</span></code></pre></div>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="chapter-link-to-census.html#cb148-1" tabindex="-1"></a><span class="co"># A tibble: 5 × 5</span></span>
<span id="cb148-2"><a href="chapter-link-to-census.html#cb148-2" tabindex="-1"></a><span class="co">#   id               geoid_tract_2010 ACS_PCT_INC50 POS_DIST_ED_TRACT</span></span>
<span id="cb148-3"><a href="chapter-link-to-census.html#cb148-3" tabindex="-1"></a><span class="co">#   &lt;chr&gt;            &lt;chr&gt;                    &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span id="cb148-4"><a href="chapter-link-to-census.html#cb148-4" tabindex="-1"></a><span class="co"># 1 01-charlotte     37119001100               3.68              0.85</span></span>
<span id="cb148-5"><a href="chapter-link-to-census.html#cb148-5" tabindex="-1"></a><span class="co"># 2 02-raleigh       37183050100               6.77              2.8</span></span>
<span id="cb148-6"><a href="chapter-link-to-census.html#cb148-6" tabindex="-1"></a><span class="co"># 3 03-greensboro    37081010800               6.16              0.99</span></span>
<span id="cb148-7"><a href="chapter-link-to-census.html#cb148-7" tabindex="-1"></a><span class="co"># 4 04-durham        37063002200              25.9               2.62</span></span>
<span id="cb148-8"><a href="chapter-link-to-census.html#cb148-8" tabindex="-1"></a><span class="co"># 5 05-winston-salem 37067000100               9.01              3.35</span></span>
<span id="cb148-9"><a href="chapter-link-to-census.html#cb148-9" tabindex="-1"></a><span class="co">#   ACS_PCT_HU_NO_VEH</span></span>
<span id="cb148-10"><a href="chapter-link-to-census.html#cb148-10" tabindex="-1"></a><span class="co">#               &lt;dbl&gt;</span></span>
<span id="cb148-11"><a href="chapter-link-to-census.html#cb148-11" tabindex="-1"></a><span class="co"># 1             7.24</span></span>
<span id="cb148-12"><a href="chapter-link-to-census.html#cb148-12" tabindex="-1"></a><span class="co"># 2            25.5</span></span>
<span id="cb148-13"><a href="chapter-link-to-census.html#cb148-13" tabindex="-1"></a><span class="co"># 3            16.4</span></span>
<span id="cb148-14"><a href="chapter-link-to-census.html#cb148-14" tabindex="-1"></a><span class="co"># 4             7.63</span></span>
<span id="cb148-15"><a href="chapter-link-to-census.html#cb148-15" tabindex="-1"></a><span class="co"># 5            16.5</span></span></code></pre></div>
<p>Now, we have a linked table of geocoded addresses (by individual id) linked to the SDOH data.</p>
</div>
</div>
<div id="concluding-remarks" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Concluding Remarks<a href="chapter-link-to-census.html#concluding-remarks" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This tutorial demonstrates how to link geocoded addresses for individuals to Census geographic boundaries and then to SDOH data available for those Census geographic boundaries. Additional tabular data available for Census geographic boundaries can then be readily linked to further develop an integrated dataset for individuals. Such integrated datasets can be used to investigate relationships between SDOH and health outcomes for individuals.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body">
<div id="ref-r-sf-1" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Pebesma, Edzer. 2018. <span>“<span class="nocase">Simple Features for <span>R</span>: Standardized Support for Spatial Vector Data</span>.”</span> <em><span>The R Journal</span></em> 10 (1): 439–46. <a href="https://doi.org/10.32614/RJ-2018-009">https://doi.org/10.32614/RJ-2018-009</a></div>
</div>
<div id="ref-r-sf-2" class="csl-entry">
<div class="csl-left-margin">8. </div><div class="csl-right-inline">Pebesma, Edzer, and Roger Bivand. 2023. <em>Spatial Data Science: With Applications in <span>R</span></em>. <span>Chapman and Hall/CRC</span>. <a href="https://doi.org/10.1201/9780429459016">https://doi.org/10.1201/9780429459016</a></div>
</div>
<div id="ref-ahrq-sdoh-database" class="csl-entry">
<div class="csl-left-margin">17. </div><div class="csl-right-inline">Agency for Healthcare Research and Quality. 2022. <em>Social Determinants of Health Database</em>. Database. <a href="https://www.ahrq.gov/sdoh/data-analytics/sdoh-data.html">https://www.ahrq.gov/sdoh/data-analytics/sdoh-data.html</a></div>
</div>
<div id="ref-r-tidyverse" class="csl-entry">
<div class="csl-left-margin">18. </div><div class="csl-right-inline">Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, et al. 2019. <span>“Welcome to the <span class="nocase">tidyverse</span>.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a></div>
</div>
<div id="ref-r-tigris" class="csl-entry">
<div class="csl-left-margin">19. </div><div class="csl-right-inline">Walker, Kyle. 2023. <em><span class="nocase">tigris</span>: Load Census <span>TIGER/Line</span> Shapefiles</em>. R Package Version 2.0.3. <a href="https://CRAN.R-project.org/package=tigris">https://CRAN.R-project.org/package=tigris</a></div>
</div>
<div id="ref-r-tmap" class="csl-entry">
<div class="csl-left-margin">20. </div><div class="csl-right-inline">Tennekes, Martijn. 2018. <span>“<span class="nocase">tmap</span>: Thematic Maps in <span>R</span>.”</span> <em>Journal of Statistical Software</em> 84 (6): 1–39. <a href="https://doi.org/10.18637/jss.v084.i06">https://doi.org/10.18637/jss.v084.i06</a></div>
</div>
<div id="ref-wasser-lesson5" class="csl-entry">
<div class="csl-left-margin">21. </div><div class="csl-right-inline">Wasser, Leah. 2018. <span>“<span class="nocase">Lesson 5. GIS in R: Understand EPSG, WKT and other CRS definition styles</span>.”</span> In <em><span class="nocase">earthlab/earth-analytics-r-course: Earth Analytics Course in the R Programming Language</span></em>. Zenodo. <a href="https://doi.org/10.5281/zenodo.1326873">https://doi.org/10.5281/zenodo.1326873</a></div>
</div>
<div id="ref-r-tidycensus" class="csl-entry">
<div class="csl-left-margin">22. </div><div class="csl-right-inline">Walker, Kyle, and Matt Herman. 2023. <em><span class="nocase">tidycensus</span>: Load US Census Boundary and Attribute Data as <span class="nocase">’tidyverse’</span> and <span class="nocase">’sf’</span>-Ready Data Frames</em>. R Package Version 1.4.4. <a href="https://CRAN.R-project.org/package=tidycensus">https://CRAN.R-project.org/package=tidycensus</a></div>
</div>
<div id="ref-census-tiger-line-shapefiles" class="csl-entry">
<div class="csl-left-margin">23. </div><div class="csl-right-inline">US Census Bureau. 2024. <em>Census Tiger/Line Shapefiles</em>. <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html">https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html</a></div>
</div>
<div id="ref-ipums-nhgis" class="csl-entry">
<div class="csl-left-margin">24. </div><div class="csl-right-inline">University of Minnesota. n.d. <em><span>IPUMS NHGIS</span></em>. <a href="https://www.nhgis.org">https://www.nhgis.org</a></div>
</div>
<div id="ref-walker2023analyzing" class="csl-entry">
<div class="csl-left-margin">25. </div><div class="csl-right-inline">Walker, Kyle. 2023. <em>Analyzing <span>US</span> Census Data: Methods, Maps, and Models in <span>R</span></em>. Chapman; Hall/CRC. <a href="https://walker-data.com/census-r/index.html">https://walker-data.com/census-r/index.html</a></div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Total number of geographic units in the US in 2020 (Source: <a href="https://www.census.gov/geographies/reference-files/time-series/geo/tallies.html">Census Bureau</a>)<a href="chapter-link-to-census.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<!DOCTYPE html>
<script src="https://cdn.jsdelivr.net/npm/@xiee/utils/js/external-link.min.js" defer></script>
            </section>

          </div>
        </div>
      </div>
<a href="health-data-integration.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-fhir-pit.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
