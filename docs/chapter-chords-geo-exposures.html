<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Linkage to Exposures | The CHORDS Toolkit for Health and Geospatial Exposures Research</title>
  <meta name="description" content="The CHORDS Toolkit provides guides, tools, and example code to support climate change and human health research." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Linkage to Exposures | The CHORDS Toolkit for Health and Geospatial Exposures Research" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="The CHORDS Toolkit provides guides, tools, and example code to support climate change and human health research." />
  <meta name="github-repo" content="NIEHS/PCOR_bookdown_tools" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Linkage to Exposures | The CHORDS Toolkit for Health and Geospatial Exposures Research" />
  
  <meta name="twitter:description" content="The CHORDS Toolkit provides guides, tools, and example code to support climate change and human health research." />
  

<meta name="author" content="" />


<meta name="date" content="2024-04-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-link-to-census.html"/>
<link rel="next" href="case-studies.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><img src="images/chords-icon-nobackground.png" width="200"></a></li>
<li><a href="./">CHORDS Toolkit</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><strong>Introduction</strong></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-chords"><i class="fa fa-check"></i>About CHORDS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-this-toolkit"><i class="fa fa-check"></i>About This Toolkit</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="foundations.html"><a href="foundations.html"><i class="fa fa-check"></i><strong>Foundations</strong></a></li>
<li class="chapter" data-level="1" data-path="chapter-intro-spatial-data-analysis.html"><a href="chapter-intro-spatial-data-analysis.html"><i class="fa fa-check"></i><b>1</b> Spatial Data Analysis</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chapter-intro-spatial-data-analysis.html"><a href="chapter-intro-spatial-data-analysis.html#introduction-1"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="chapter-intro-spatial-data-analysis.html"><a href="chapter-intro-spatial-data-analysis.html#point-data-with-sf"><i class="fa fa-check"></i><b>1.2</b> Point Data with <code>sf</code></a></li>
<li class="chapter" data-level="1.3" data-path="chapter-intro-spatial-data-analysis.html"><a href="chapter-intro-spatial-data-analysis.html#polygon-data"><i class="fa fa-check"></i><b>1.3</b> Polygon Data</a></li>
<li class="chapter" data-level="1.4" data-path="chapter-intro-spatial-data-analysis.html"><a href="chapter-intro-spatial-data-analysis.html#raster-data-with-terra"><i class="fa fa-check"></i><b>1.4</b> Raster Data with <code>terra</code></a></li>
<li class="chapter" data-level="1.5" data-path="chapter-intro-spatial-data-analysis.html"><a href="chapter-intro-spatial-data-analysis.html#additional-resources"><i class="fa fa-check"></i><b>1.5</b> Additional Resources</a></li>
<li class="chapter" data-level="1.6" data-path="chapter-intro-spatial-data-analysis.html"><a href="chapter-intro-spatial-data-analysis.html#references"><i class="fa fa-check"></i><b>1.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="wildfire-data.html"><a href="wildfire-data.html"><i class="fa fa-check"></i><strong>Wildfire Data</strong></a></li>
<li class="chapter" data-level="2" data-path="wildfire-chapter.html"><a href="wildfire-chapter.html"><i class="fa fa-check"></i><b>2</b> Wildfire Chapter</a></li>
<li class="chapter" data-level="" data-path="other-environmental-data.html"><a href="other-environmental-data.html"><i class="fa fa-check"></i><strong>Other Environmental Data</strong></a></li>
<li class="chapter" data-level="3" data-path="chapter-nasa-earthdata.html"><a href="chapter-nasa-earthdata.html"><i class="fa fa-check"></i><b>3</b> NASA EarthData Download</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapter-nasa-earthdata.html"><a href="chapter-nasa-earthdata.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="chapter-nasa-earthdata.html"><a href="chapter-nasa-earthdata.html#nasa-earthdata-account"><i class="fa fa-check"></i><b>3.2</b> NASA EarthData Account</a></li>
<li class="chapter" data-level="3.3" data-path="chapter-nasa-earthdata.html"><a href="chapter-nasa-earthdata.html#references-1"><i class="fa fa-check"></i><b>3.3</b> References</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="health-data-integration.html"><a href="health-data-integration.html"><i class="fa fa-check"></i><strong>Health Data Integration</strong></a></li>
<li class="chapter" data-level="4" data-path="chapter-link-to-census.html"><a href="chapter-link-to-census.html"><i class="fa fa-check"></i><b>4</b> Linkage to Census Units</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chapter-link-to-census.html"><a href="chapter-link-to-census.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="chapter-link-to-census.html"><a href="chapter-link-to-census.html#tutorial"><i class="fa fa-check"></i><b>4.2</b> Tutorial</a></li>
<li class="chapter" data-level="4.3" data-path="chapter-link-to-census.html"><a href="chapter-link-to-census.html#concluding-remarks"><i class="fa fa-check"></i><b>4.3</b> Concluding Remarks</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapter-chords-geo-exposures.html"><a href="chapter-chords-geo-exposures.html"><i class="fa fa-check"></i><b>5</b> Linkage to Exposures</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chapter-chords-geo-exposures.html"><a href="chapter-chords-geo-exposures.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="chapter-chords-geo-exposures.html"><a href="chapter-chords-geo-exposures.html#chapter-geo-exposure-caces"><i class="fa fa-check"></i><b>5.2</b> CACES Air Pollution</a></li>
<li class="chapter" data-level="5.3" data-path="chapter-chords-geo-exposures.html"><a href="chapter-chords-geo-exposures.html#chapter-geo-exposure-faa"><i class="fa fa-check"></i><b>5.3</b> Airport Proximity</a></li>
<li class="chapter" data-level="5.4" data-path="chapter-chords-geo-exposures.html"><a href="chapter-chords-geo-exposures.html#chapter-geo-exposure-roads"><i class="fa fa-check"></i><b>5.4</b> Major Road Proximity</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="case-studies.html"><a href="case-studies.html"><i class="fa fa-check"></i><strong>Case Studies</strong></a></li>
<li class="chapter" data-level="6" data-path="chapter-case-ma-pm25.html"><a href="chapter-case-ma-pm25.html"><i class="fa fa-check"></i><b>6</b> Air Quality, Income, and Asthma</a>
<ul>
<li class="chapter" data-level="6.1" data-path="chapter-case-ma-pm25.html"><a href="chapter-case-ma-pm25.html#introduction-5"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="chapter-case-ma-pm25.html"><a href="chapter-case-ma-pm25.html#data-preparation-and-integration"><i class="fa fa-check"></i><b>6.2</b> Data Preparation and Integration</a></li>
<li class="chapter" data-level="6.3" data-path="chapter-case-ma-pm25.html"><a href="chapter-case-ma-pm25.html#data-exploration-and-vizualization"><i class="fa fa-check"></i><b>6.3</b> Data Exploration and Vizualization</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><strong>Appendix</strong></a></li>
<li class="chapter" data-level="" data-path="chapter-user-profiles.html"><a href="chapter-user-profiles.html"><i class="fa fa-check"></i><strong>A</strong> User Profiles</a></li>
<li class="chapter" data-level="" data-path="chords-glossary.html"><a href="chords-glossary.html"><i class="fa fa-check"></i><strong>B</strong> CHORDS Glossary</a></li>
<li class="chapter" data-level="" data-path="all-references-appendix.html"><a href="all-references-appendix.html"><i class="fa fa-check"></i><strong>C</strong> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" 
target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The CHORDS Toolkit for Health and Geospatial Exposures Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-chords-geo-exposures" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Linkage to Exposures<a href="chapter-chords-geo-exposures.html#chapter-chords-geo-exposures" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="chapter-user-profiles.html#profilecmp"><img src="images/user_profiles/profilecmp.svg" alt="Profile-CMP" /></a>
<a href="chapter-user-profiles.html#profilecdm"><img src="images/user_profiles/profilecdm.svg" alt="Profile-CDM" /></a>
<a href="chapter-user-profiles.html#profilestu"><img src="images/user_profiles/profilestu.svg" alt="Profile-STU" /></a></p>
<div id="linking-geocoded-addresses-to-various-geospatial-exposure-types-using-niehs-tools-in-r" class="section level3 unnumbered hasAnchor">
<h3>Linking Geocoded Addresses to Various Geospatial Exposure Types Using NIEHS Tools in R<a href="chapter-chords-geo-exposures.html#linking-geocoded-addresses-to-various-geospatial-exposure-types-using-niehs-tools-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Date Modified:</strong> August 10, 2023</p>
<p><strong>Authors:</strong> Lara P. Clark <a href="https://orcid.org/0000-0001-6940-5442"><img src="images/orcid.png" width="10" alt="author-lpc" /></a>, Kyle P. Messier <a href="https://orcid.org/0000-0001-9508-9623"><img src="images/orcid.png" width="10" alt="author-kpm" /></a>, Sue Nolte, Charles Schmitt <a href="https://orcid.org/0000-0002-3148-2263"><img src="images/orcid.png" width="10" alt="author-cps" /></a> <em>et al.</em></p>
<p><strong>Key Terms:</strong> <a href="https://tools.niehs.nih.gov/cchhglossary/?keyword=data+integration&amp;termOnlySearch=true&amp;exactSearch=true">Data Integration</a>, <a href="https://tools.niehs.nih.gov/cchhglossary/?keyword=exposure&amp;termOnlySearch=true&amp;exactSearch=true">Exposure</a>, <a href="https://tools.niehs.nih.gov/cchhglossary/?keyword=exposure+assessment&amp;termOnlySearch=true&amp;exactSearch=true">Exposure Assessment</a>, <a href="chords-glossary.html#def-geocoded-address">Geocoded Address</a>, <a href="chords-glossary.html#def-geospatial-data">Geospatial Data</a></p>
<p><strong>Programming Language:</strong> R</p>
</div>
<div id="introduction-4" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Introduction<a href="chapter-chords-geo-exposures.html#introduction-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="motivation-3" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Motivation<a href="chapter-chords-geo-exposures.html#motivation-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Climate change and health research draws upon diverse types of open geospatial data to assess individuals’ environmental exposures, such as exposure to air pollution, green space, and extreme temperature. Calculating such environmental exposures using open geospatial data can be challenging and can require expertise from multiple disciplines, from geographic information science to exposure science to bioinformatics. Open source software can help reduce barriers and support broader use of open geospatial data for assessing environmental exposures using reproducible methods.</p>
</div>
<div id="approach" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Approach<a href="chapter-chords-geo-exposures.html#approach" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This chapter describes NIEHS open source tools to link environmental exposures to individual health data based on geocoded addresses (i.e., geographic coordinates, latitude and longitude). These tools are intended to be accessible to researchers without training in geographic information science (GISc) or geographic information systems (GIS) software. These tools require basic or beginner level programming in <code>R</code>.</p>
<p>The tools consist of code, standardized data, and documentation describing use for environmental health applications. Each tool calculates a selection of environmental exposure metrics based on a different source of open geospatial data with national (or approximately national) coverage for United States. Exposure metrics are calculated based on specified point locations (i.e., geocoded address or other geographic coordinates). For data sources that include temporal information, the exposure metrics are also calculated based on specified times. Output of the tool includes the calculated exposure metrics as well as information about data missingness and an optional log file. These tools are designed to be run completely offline as an approach to protect personal geolocation data <span class="citation">(<a href="#ref-brokamp2018degauss">Brokamp 2018</a>)</span>.</p>
<p>These tools depend on the following <code>R</code> packages: <code>sf</code> <span class="citation">(<a href="#ref-r-sf-1">Pebesma 2018</a>; <a href="#ref-r-sf-2">Pebesma and Bivand 2023</a>)</span>, <code>terra</code> <span class="citation">(<a href="#ref-r-terra">Hijmans 2024</a>)</span>, and <code>tidyverse</code> <span class="citation">(<a href="#ref-r-tidyverse">Wickham et al. 2019</a>)</span>.</p>
</div>
<div id="tools" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Tools<a href="chapter-chords-geo-exposures.html#tools" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following summarizes the available tools and planned tools:</p>
<table>
<colgroup>
<col width="22%" />
<col width="28%" />
<col width="19%" />
<col width="20%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th>Tool</th>
<th>Exposure Metrics</th>
<th>Spatial Details</th>
<th>Temporal Details</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="chapter-chords-geo-exposures.html#chapter-geo-exposure-caces">Air pollution (CACES model)</a></td>
<td>Annual average outdoor concentrations of ozone, particulate matter (PM<sub>2.5</sub>, PM<sub>10</sub>), sulfur dioxide, carbon monoxide, and nitrogen dioxide air pollution</td>
<td>Census tracts in the contiguous US</td>
<td>Yearly during 1979-2015 (varies by pollutant)</td>
<td>Version 1.0</td>
</tr>
<tr class="even">
<td><a href="chapter-chords-geo-exposures.html#chapter-geo-exposure-faa">Airport proximity</a></td>
<td>Distance to nearest, number within buffer distance, summary of distances (mean, mean of log, 25<sup>th</sup>, 50<sup>th</sup> and 75<sup>th</sup> percentiles) within buffer distance</td>
<td>Points in the US</td>
<td>Yearly during 1981-2020</td>
<td>Version 1.0</td>
</tr>
<tr class="odd">
<td><a href="chapter-chords-geo-exposures.html#chapter-geo-exposure-roads">Major road proximity</a></td>
<td>Distance to nearest, length in buffer distance</td>
<td>Lines in the US</td>
<td>Yearly during 2000-2018</td>
<td>Version 1.0</td>
</tr>
<tr class="even">
<td>Air pollution (ACAG model)</td>
<td>Annual average outdoor concentrations of particulate matter (PM<sub>2.5</sub>) and its components</td>
<td>0.01 degree grid in North America</td>
<td>Yearly during 2000-2018</td>
<td>In Development</td>
</tr>
<tr class="odd">
<td>Superfund sites</td>
<td>Distance to nearest, number within buffer distance, summary of distances (mean, mean of log, 25<sup>th</sup>, 50<sup>th</sup> and 75<sup>th</sup> percentiles) within buffer distance</td>
<td>Points in the US</td>
<td>2014</td>
<td>In Development</td>
</tr>
</tbody>
</table>
</div>
<div id="additional-resources-1" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Additional Resources<a href="chapter-chords-geo-exposures.html#additional-resources-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Other available tools to calculate environmental exposures for health applications:</p>
<ul>
<li>DeGAUSS geomarker software <span class="citation">(<a href="#ref-brokamp2018degauss">Brokamp 2018</a>)</span> provides <a href="https://degauss.org/available_images.html">containerized tools</a> to calculate various geospatial exposure metrics based on geocoded address and state and end date. These metrics include proximity to roadways, traffic, land cover, and vegetation indices.</li>
</ul>

</div>
</div>
<div id="chapter-geo-exposure-caces" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> CACES Air Pollution<a href="chapter-chords-geo-exposures.html#chapter-geo-exposure-caces" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following are step-by-step instructions to calculate annual average air pollution exposure metrics using the <a href="https://www.caces.us/data">Center for Air, Climate, &amp; Energy Solutions (CACES) land use regression models (Version 1.0)</a>.</p>
<div id="description" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Description<a href="chapter-chords-geo-exposures.html#description" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="caces-air-pollution-model-data" class="section level4 unnumbered hasAnchor">
<h4>CACES Air Pollution Model Data<a href="chapter-chords-geo-exposures.html#caces-air-pollution-model-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The CACES models are based on air pollution observations from United States (US) Environmental Protection Agency monitors and from satellites, as well as land cover and land use information (e.g., locations of roadways). CACES model predictions cover populated locations in the contiguous US (i.e., in the 48 contiguous states plus the District of Columbia) at the spatial resolution of US census tracts, for the following air pollutants and time-periods:</p>
<table>
<colgroup>
<col width="32%" />
<col width="15%" />
<col width="33%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th>Air pollutant</th>
<th>Units</th>
<th>Exposure metric</th>
<th>Available years</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>carbon monoxide (CO)</td>
<td>ppm</td>
<td>annual average concentration</td>
<td>1990-2015</td>
</tr>
<tr class="even">
<td>nitrogen dioxide (NO<sub>2</sub>)</td>
<td>ppb</td>
<td>annual average concentration</td>
<td>1979-2015</td>
</tr>
<tr class="odd">
<td>ozone (O<sub>3</sub>)</td>
<td>ppb</td>
<td>May through September average of daily moving 8-hour maximum average concentration</td>
<td>1979-2015</td>
</tr>
<tr class="even">
<td>particulate matter (PM<sub>2.5</sub>)</td>
<td>µg m<sup>-3</sup></td>
<td>annual average concentration</td>
<td>1999-2015</td>
</tr>
<tr class="odd">
<td>particulate matter (PM<sub>10</sub>)</td>
<td>µg m<sup>-3</sup></td>
<td>annual average concentration</td>
<td>1988-2015</td>
</tr>
<tr class="even">
<td>sulfur dioxide (SO<sub>2</sub>)</td>
<td>ppb</td>
<td>annual average concentration</td>
<td>1979-2015</td>
</tr>
</tbody>
</table>
<p>The following figure illustrates the spatial coverage (contiguous US) and spatial resolution (census tracts) for a single pollutant and time-period (NO<sub>2</sub> in 2015):</p>
<center>
<div class="float">
<img src="images/caces_map_no2_2015.jpeg" alt="Illustration of CACES data (a) spatial coverage (contiguous United States) and (b) spatial scale (census tracts)." />
<div class="figcaption"><em>Illustration of CACES data <strong>(a)</strong> spatial coverage (contiguous United States) and <strong>(b)</strong> spatial scale (census tracts).</em></div>
</div>
</center>
</div>
<div id="exposure-metrics" class="section level4 unnumbered hasAnchor">
<h4>Exposure Metrics<a href="chapter-chords-geo-exposures.html#exposure-metrics" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This tool calculates long-term average air pollution exposure metrics for a specified list of receptor point locations (e.g., geocoded home addresses) during a specified time-period in years. This tool can be used to calculate average exposure metrics:</p>
<ul>
<li>for a single year or single range of years that is constant across all receptor locations (e.g., 2002, 2010 to 2015)</li>
<li>for a single year or range of years that varies across receptor locations (e.g., year of birth, years of residence at geocoded home address)</li>
</ul>
<p>Exposure metrics can be calculated for all CACES pollutants or any subset of them. Output includes information about data missingness (e.g., whether a specified receptor point is
located outside the coverage of the CACES data) as well as an optional log file.</p>
</div>
<div id="recommended-uses" class="section level4 unnumbered hasAnchor">
<h4>Recommended Uses<a href="chapter-chords-geo-exposures.html#recommended-uses" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This tool is recommended for the following uses:</p>
<ul>
<li>Comparisons of exposures across larger geographic regions in the contiguous US (e.g., across a metropolitan area or state). <em>Note: This tool is based on census tract level air pollution model data and cannot be used to compare exposures for different locations within the same census tract.</em><br />
</li>
<li>Comparisons of exposures incorporating multiple pollutants and/or years in
a consistent manner<br />
</li>
<li>Analyses focused on long-term average (e.g., annual average, multi-year average) exposures to air pollution</li>
</ul>
</div>
<div id="steps" class="section level4 unnumbered hasAnchor">
<h4>Steps<a href="chapter-chords-geo-exposures.html#steps" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p><a href="chapter-chords-geo-exposures.html#step-1-caces">Install R and required packages</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-2-caces">Download tool</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-3-caces">Prepare receptor point data</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-4-caces">Run script in R</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-5-caces">Review output</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-6-caces">Cite data and tool</a></p></li>
</ol>
</div>
</div>
<div id="step-1-caces" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Install R and Required Packages<a href="chapter-chords-geo-exposures.html#step-1-caces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://cran.r-project.org/">Install R</a>. Optionally, <a href="https://www.rstudio.com/products/rstudio/download/">install RStudio</a>.</p>
<p>Then, install the following R packages: <code>logr</code>, <code>tidyverse</code>, <code>sf</code>.
Follow <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Installing-packages">R package installation instructions</a>, or run the following code in R:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="chapter-chords-geo-exposures.html#cb149-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;logr&quot;</span>, <span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;sf&quot;</span>))</span></code></pre></div>
</div>
<div id="step-2-caces" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Download Tool<a href="chapter-chords-geo-exposures.html#step-2-caces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Download and save the folder containing input data (<code>input_source_caces.rds</code> and <code>input_census_tracts_2010.rds</code>) and script (<code>script_caces_exposures_for_points.R</code>). To directly run the example scripts provided with these instructions in <a href="chapter-chords-geo-exposures.html#step-4-caces">Step 4</a>, do not change the file names within the folder.</p>
</div>
<div id="step-3-caces" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Prepare Receptor Point Data<a href="chapter-chords-geo-exposures.html#step-3-caces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Prepare a comma-separated values (CSV) file that contains a table of the receptor
point locations (e.g., geocoded addresses, coordinates). Include each receptor as
a separate row in the table, and include the following <strong>required</strong> columns:</p>
<ul>
<li><code>id</code>: a unique and anonymous identifying code for each receptor. This can be in character (string) or numeric (double) format. <code>id</code> must be unique across all rows in the receptor point location table. It is not possible to use the same <code>id</code> for different time-points or locations within the same receptor point location table.<br />
</li>
<li><code>latitude</code>: the latitude of the receptor point location in decimal degrees
format (range: -90 to 90)</li>
<li><code>longitude</code>: the longitude of the receptor point location in decimal
degrees format (range: -180 to 180)</li>
</ul>
<p>To calculate exposure metrics for time-periods (year or range of years) that vary
across the receptors (e.g., years of residence at geocoded addresses), include <strong>both</strong>
of the following <strong>optional</strong> columns:</p>
<ul>
<li><code>time_start</code>: the first year of the time-period in “YYYY” format (e.g., <code>2002</code> for year 2002)<br />
</li>
<li><code>time_end</code>: the last year of the time-period in “YYYY” format (e.g., <code>2003</code> for year 2003)</li>
</ul>
<div class="note">
<p>To calculate exposure metrics for a single year that varies across the receptors, provide the same year for both <code>time_start</code> and <code>time_end</code> for each receptor. To calculate exposure metrics for a range of years that is constant across the receptors, provide the start year of the range as <code>time_start</code> for all receptors and the end year of the range as <code>time_end</code> for all receptors. To calculate exposure metrics for a single year that is constant across all receptors, specify year for exposure assessment using argument <code>caces_year</code>. If both <code>caces_year</code> and <code>time_start</code> and <code>time_end</code> are provided, the exposure assessment will be based on <code>caces_year</code> (ignoring <code>time_start</code> and <code>time_end</code>).</p>
</div>
<p>The following table provides an example of the receptor point data format:</p>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>latitude</th>
<th>longitude</th>
<th>time_start</th>
<th>time_end</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1011A</td>
<td>39.00205369</td>
<td>-77.105578716</td>
<td>2002</td>
<td>2011</td>
</tr>
<tr class="even">
<td>1012C</td>
<td>35.88480215</td>
<td>-78.877942573</td>
<td>2014</td>
<td>2015</td>
</tr>
<tr class="odd">
<td>1013E</td>
<td>39.43560788</td>
<td>-77.434847823</td>
<td>1990</td>
<td>1990</td>
</tr>
</tbody>
</table>
<p>To directly run the example scripts provided with these instructions, save the receptor point data as <code>input_receptor.csv</code> in the folder.</p>
</div>
<div id="step-4-caces" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Run Script in R<a href="chapter-chords-geo-exposures.html#step-4-caces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Run the script <code>script_caces_exposures_for_points.R</code> to load the required functions
in R. You can then use the function <code>get_caces_for_points()</code> to calculate
the mean CACES model pollutant concentrations for the selected time period (in years)
for each receptor point location.</p>
<div id="description-of-function-get_caces_for_points" class="section level4 unnumbered hasAnchor">
<h4>Description of Function <code>get_caces_for_points()</code><a href="chapter-chords-geo-exposures.html#description-of-function-get_caces_for_points" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This function takes the receptor point data above and returns a data frame with the receptor id linked to the exposure estimates for selected pollutants and time periods as well as information about data missingness. Optionally, the function also writes a log file in the current R working directory. The function has the following arguments:</p>
<p><strong>Required Arguments</strong></p>
<ul>
<li><code>receptor_filepath</code>: specifies the file path to a CSV file containing the receptor point locations (described in <a href="chapter-chords-geo-exposures.html#step-3-caces">Step 3</a>). <em>Note: The format for file paths in R can vary by operating system.</em><br />
</li>
<li><code>source_caces_filepath</code>: specifies the file path to a RDS file containing a data frame with the CACES air pollution estimates by census tract. This is the file <code>input_source_caces.rds</code>.<br />
</li>
<li><code>source_census_tracts_2010_filepath</code>: specifies the file path to a RDS file containing the simple features with the 2010 census tracts for the US. This is the file <code>input_census_tracts_2010.rds</code>.</li>
</ul>
<p><strong>Optional Arguments</strong></p>
<ul>
<li><code>receptor_crs</code>: a coordinate reference system object (i.e., <a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/OverviewCoordinateReferenceSystems.pdf">class is <code>crs</code> object in R</a>) for the receptor point locations. Default is “EPSG:4269” (i.e., NAD83).</li>
<li><code>caces_pollutants</code>: list that specifies the subset of CACES pollutants to include. Default is all pollutants: <code>"co", "no2", "o3", "pm10", "pm25", "so2"</code>.<br />
</li>
<li><code>caces_year</code>: specifies a single year (in “YYYY” format; e.g., 2003) for exposure assessment across all pollutants and receptors. Default is <code>NULL</code>. <code>caces_year</code> is required to be specified if <code>time_start</code> and <code>time_end</code> are <strong>not</strong> provided with the receptor point data. If both <code>caces_year</code> and <code>time_start</code> and <code>time_end</code> are provided, exposure assessment will be based on the single year specified by <code>caces_year</code> (i.e., ignoring <code>time_start</code> and <code>time_end</code>). <code>caces_year</code> must be <code>NULL</code> if using <code>time_start</code> and <code>time_end</code> to specify year(s) that vary across receptor points for exposure assessment. <code>caces_year</code> must be during 1999-2015 to return exposure estimates for all six pollutants, or during 1979-2015 for O<sub>3</sub>, NO<sub>2</sub>, and SO<sub>2</sub>, 1988-2015 for PM<sub>10</sub>, 1990-2015 for CO, or 1999-2015 for PM<sub>2.5</sub>.<br />
</li>
<li><code>add_all_input_to_output</code>: logical argument that specifies whether the output should include <em>all columns</em> included with receptor point locations (described in <a href="chapter-chords-geo-exposures.html#step-3-caces">Step 3</a>). <code>TRUE</code> returns all columns (i.e., including any time information and census tract identifying code) with output. <code>FALSE</code> returns only the anonymous receptor identifying code, exposure estimates, and data missingness flags with output. <code>FALSE</code> may be useful for meeting data de-identification requirements. Default is <code>TRUE</code>.<br />
</li>
<li><code>write_log_to_file</code>: logical argument that specifies whether a log should be written to file. <code>TRUE</code> will create a log file in the current working directory. Default is <code>TRUE</code>.<br />
</li>
<li><code>print_log_to_console</code>: logical argument that specifies whether a log should be printed to the console. <code>TRUE</code> will print a log to console. Default is <code>TRUE</code>.</li>
</ul>
</div>
<div id="example-use" class="section level4 unnumbered hasAnchor">
<h4>Example Use<a href="chapter-chords-geo-exposures.html#example-use" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Below are two example scripts for using the function above to produce a CSV file with the CACES exposure estimates for each receptor point for ozone and nitrogen dioxide in year 2015 (using default options for all other optional arguments). The first example uses only R but requires editing the file paths. The second example requires RStudio and the <code>here</code> package but does not require editing file paths.</p>
<p><strong>Example 1: Base R</strong></p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="chapter-chords-geo-exposures.html#cb150-1" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb150-2"><a href="chapter-chords-geo-exposures.html#cb150-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb150-3"><a href="chapter-chords-geo-exposures.html#cb150-3" tabindex="-1"></a><span class="fu">library</span>(logr)</span>
<span id="cb150-4"><a href="chapter-chords-geo-exposures.html#cb150-4" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb150-5"><a href="chapter-chords-geo-exposures.html#cb150-5" tabindex="-1"></a></span>
<span id="cb150-6"><a href="chapter-chords-geo-exposures.html#cb150-6" tabindex="-1"></a><span class="co"># Load functions</span></span>
<span id="cb150-7"><a href="chapter-chords-geo-exposures.html#cb150-7" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;/set/file/path/to/script_caces_exposures_for_points.R&quot;</span>)</span>
<span id="cb150-8"><a href="chapter-chords-geo-exposures.html#cb150-8" tabindex="-1"></a></span>
<span id="cb150-9"><a href="chapter-chords-geo-exposures.html#cb150-9" tabindex="-1"></a><span class="co"># Get exposures</span></span>
<span id="cb150-10"><a href="chapter-chords-geo-exposures.html#cb150-10" tabindex="-1"></a>caces_exposures <span class="ot">&lt;-</span></span>
<span id="cb150-11"><a href="chapter-chords-geo-exposures.html#cb150-11" tabindex="-1"></a>  <span class="fu">get_caces_for_points</span>(</span>
<span id="cb150-12"><a href="chapter-chords-geo-exposures.html#cb150-12" tabindex="-1"></a>    <span class="at">receptor_filepath =</span> <span class="st">&quot;/set/file/path/to/input_receptor.csv&quot;</span>,</span>
<span id="cb150-13"><a href="chapter-chords-geo-exposures.html#cb150-13" tabindex="-1"></a>    <span class="at">source_caces_filepath =</span> <span class="st">&quot;/set/file/path/to/input_source_caces.rds&quot;</span>,</span>
<span id="cb150-14"><a href="chapter-chords-geo-exposures.html#cb150-14" tabindex="-1"></a>    <span class="at">source_census_tracts_2010_filepath =</span></span>
<span id="cb150-15"><a href="chapter-chords-geo-exposures.html#cb150-15" tabindex="-1"></a>    <span class="st">&quot;/set/file/path/to/input_census_tracts_2010.rds&quot;</span>,</span>
<span id="cb150-16"><a href="chapter-chords-geo-exposures.html#cb150-16" tabindex="-1"></a>    <span class="at">caces_year =</span> <span class="dv">2015</span>,</span>
<span id="cb150-17"><a href="chapter-chords-geo-exposures.html#cb150-17" tabindex="-1"></a>    <span class="at">caces_pollutants =</span> <span class="fu">c</span>(<span class="st">&quot;o3&quot;</span>, <span class="st">&quot;no2&quot;</span>)</span>
<span id="cb150-18"><a href="chapter-chords-geo-exposures.html#cb150-18" tabindex="-1"></a>  )</span>
<span id="cb150-19"><a href="chapter-chords-geo-exposures.html#cb150-19" tabindex="-1"></a></span>
<span id="cb150-20"><a href="chapter-chords-geo-exposures.html#cb150-20" tabindex="-1"></a><span class="co"># Write exposures to CSV</span></span>
<span id="cb150-21"><a href="chapter-chords-geo-exposures.html#cb150-21" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(caces_exposures,</span>
<span id="cb150-22"><a href="chapter-chords-geo-exposures.html#cb150-22" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;/set/file/path/to/output_caces_exposures.csv&quot;</span></span>
<span id="cb150-23"><a href="chapter-chords-geo-exposures.html#cb150-23" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Example 2: RStudio with <code>here</code> Package</strong></p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="chapter-chords-geo-exposures.html#cb151-1" tabindex="-1"></a><span class="co"># Install here package (if needed)</span></span>
<span id="cb151-2"><a href="chapter-chords-geo-exposures.html#cb151-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb151-3"><a href="chapter-chords-geo-exposures.html#cb151-3" tabindex="-1"></a></span>
<span id="cb151-4"><a href="chapter-chords-geo-exposures.html#cb151-4" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb151-5"><a href="chapter-chords-geo-exposures.html#cb151-5" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb151-6"><a href="chapter-chords-geo-exposures.html#cb151-6" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb151-7"><a href="chapter-chords-geo-exposures.html#cb151-7" tabindex="-1"></a><span class="fu">library</span>(logr)</span>
<span id="cb151-8"><a href="chapter-chords-geo-exposures.html#cb151-8" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb151-9"><a href="chapter-chords-geo-exposures.html#cb151-9" tabindex="-1"></a></span>
<span id="cb151-10"><a href="chapter-chords-geo-exposures.html#cb151-10" tabindex="-1"></a><span class="co"># Set location</span></span>
<span id="cb151-11"><a href="chapter-chords-geo-exposures.html#cb151-11" tabindex="-1"></a>here<span class="sc">::</span><span class="fu">i_am</span>(<span class="st">&quot;script_caces_exposures_for_points.R&quot;</span>)</span>
<span id="cb151-12"><a href="chapter-chords-geo-exposures.html#cb151-12" tabindex="-1"></a></span>
<span id="cb151-13"><a href="chapter-chords-geo-exposures.html#cb151-13" tabindex="-1"></a><span class="co"># Load functions</span></span>
<span id="cb151-14"><a href="chapter-chords-geo-exposures.html#cb151-14" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;script_caces_exposures_for_points.R&quot;</span>))</span>
<span id="cb151-15"><a href="chapter-chords-geo-exposures.html#cb151-15" tabindex="-1"></a></span>
<span id="cb151-16"><a href="chapter-chords-geo-exposures.html#cb151-16" tabindex="-1"></a><span class="co"># Get exposures</span></span>
<span id="cb151-17"><a href="chapter-chords-geo-exposures.html#cb151-17" tabindex="-1"></a>caces_exposures <span class="ot">&lt;-</span></span>
<span id="cb151-18"><a href="chapter-chords-geo-exposures.html#cb151-18" tabindex="-1"></a>  <span class="fu">get_caces_for_points</span>(</span>
<span id="cb151-19"><a href="chapter-chords-geo-exposures.html#cb151-19" tabindex="-1"></a>    <span class="at">receptor_filepath =</span> <span class="fu">here</span>(<span class="st">&quot;input_receptor.csv&quot;</span>),</span>
<span id="cb151-20"><a href="chapter-chords-geo-exposures.html#cb151-20" tabindex="-1"></a>    <span class="at">source_caces_filepath =</span> <span class="fu">here</span>(<span class="st">&quot;input_source_caces.rds&quot;</span>),</span>
<span id="cb151-21"><a href="chapter-chords-geo-exposures.html#cb151-21" tabindex="-1"></a>    <span class="at">source_census_tracts_2010_filepath =</span></span>
<span id="cb151-22"><a href="chapter-chords-geo-exposures.html#cb151-22" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">&quot;input_census_tracts_2010.rds&quot;</span>),</span>
<span id="cb151-23"><a href="chapter-chords-geo-exposures.html#cb151-23" tabindex="-1"></a>    <span class="at">caces_year =</span> <span class="dv">2015</span>,</span>
<span id="cb151-24"><a href="chapter-chords-geo-exposures.html#cb151-24" tabindex="-1"></a>    <span class="at">caces_pollutants =</span> <span class="fu">c</span>(<span class="st">&quot;o3&quot;</span>, <span class="st">&quot;no2&quot;</span>)</span>
<span id="cb151-25"><a href="chapter-chords-geo-exposures.html#cb151-25" tabindex="-1"></a>  )</span>
<span id="cb151-26"><a href="chapter-chords-geo-exposures.html#cb151-26" tabindex="-1"></a></span>
<span id="cb151-27"><a href="chapter-chords-geo-exposures.html#cb151-27" tabindex="-1"></a><span class="co"># Write exposures to CSV</span></span>
<span id="cb151-28"><a href="chapter-chords-geo-exposures.html#cb151-28" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(caces_exposures,</span>
<span id="cb151-29"><a href="chapter-chords-geo-exposures.html#cb151-29" tabindex="-1"></a>  <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;output_caces_exposures.csv&quot;</span>)</span>
<span id="cb151-30"><a href="chapter-chords-geo-exposures.html#cb151-30" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="step-5-caces" class="section level3 hasAnchor" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Review Output<a href="chapter-chords-geo-exposures.html#step-5-caces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="log-file" class="section level4 unnumbered hasAnchor">
<h4>Log File<a href="chapter-chords-geo-exposures.html#log-file" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After running the example script above, with the log file option selected, the log
file will be available in the folder <code>log</code> in the current R working directory.</p>
</div>
<div id="output-data" class="section level4 unnumbered hasAnchor">
<h4>Output Data<a href="chapter-chords-geo-exposures.html#output-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After running the example script above, calculated exposure metrics for receptor
locations will be available in the file <code>output_caces_exposure.csv</code> within the
folder. This CSV file includes a row for each receptor with the following columns (as applicable):</p>
<p><strong>Identifiers</strong></p>
<ul>
<li><code>id</code>: the unique and anonymous identifying code for each receptor<br />
</li>
<li><code>fips_tr_10</code>: the identifying code (FIPS code) for the year 2010 census tract</li>
</ul>
<p><strong>Calculated Exposure Metrics</strong></p>
<ul>
<li><code>co</code>: mean CACES model predicted concentration of outdoor annual average carbon monoxide (CO) air pollution (units: parts per million [ppm]) for the census tract that contains the receptor point location during the specified year(s)<br />
</li>
<li><code>no2</code>: mean CACES model predicted concentration of outdoor annual average nitrogen dioxide (NO<sub>2</sub>) air pollution (units: parts per billion [ppb]) for the census tract that contains the receptor point location during the specified year(s)<br />
</li>
<li><code>o3</code>: mean CACES model predicted concentration of outdoor annual average ozone (O<sub>3</sub>) air pollution (units: parts per billion [ppb]) for the census tract that contains the receptor point location during the specified year(s)<br />
</li>
<li><code>pm25</code>: mean CACES model predicted concentration of outdoor annual average particulate matter (PM<sub>2.5</sub>) air pollution (units: micrograms per cubic meter [µg m<sup>-3</sup>]) for the census tract that contains the receptor point location during the specified year(s)<br />
</li>
<li><code>pm10</code>: mean CACES model predicted concentration of outdoor annual average particulate matter (PM<sub>10</sub>) air pollution (units: micrograms per cubic meter [µg m<sup>-3</sup>]) for the census tract that contains the receptor point location during the specified year(s)<br />
</li>
<li><code>so2</code>: mean CACES model predicted concentration of outdoor annual average sulfur dioxide (SO<sub>2</sub>) air pollution (units: parts per billion [ppb]) for the census tract that contains the receptor point location during the specified year(s)</li>
</ul>
<p><strong>Information on Data Missingness</strong></p>
<ul>
<li><code>caces_flag_01</code>: binary variable indicating whether the receptor point is located within a year 2010 US census tract:
<ul>
<li><code>1</code> indicates that receptor point is <strong>not</strong> located within a year 2010 US census tract. All exposure metrics for that receptor point will be reported as <code>NA</code>.</li>
<li><code>0</code> indicates that receptor point is located within a year 2010 US census tract<br />
</li>
</ul></li>
<li><code>caces_flag_02</code>: binary variable indicating whether receptor point is located within a year 2010 US census tract but outside the spatial coverage of the CACES air pollution model:
<ul>
<li><code>1</code> indicates receptor point is located within a year 2010 US census tract but outside the spatial coverage of the CACES air pollution model. Examples include tracts in Alaska, Hawaii, or US territories, and tracts with no population recorded in the 2010 Decennial Census. All exposure metrics for that receptor point will be reported as <code>NA</code>.<br />
</li>
<li><code>0</code> indicates that receptor point is located within a year 2010 census tract within coverage of the CACES air pollution model<br />
</li>
</ul></li>
<li><code>caces_flag_03</code>: binary variable indicating whether the specified time period for that receptor point is <em>completely</em> outside the coverage of the CACES air pollution model:
<ul>
<li><code>1</code> indicates that the specified time (year(s)) for that receptor point is completely outside the temporal coverage of CACES air pollution model for one or more of the selected pollutants. Exposure metrics will be reported as <code>NA</code> for one or more of the selected pollutants.<br />
</li>
<li><code>0</code> indicates that the specified time (year(s)) for that receptor point is <strong>not</strong> completely outside the temporal coverage of CACES air pollution model for any of the selected pollutants<br />
</li>
</ul></li>
<li><code>caces_flag_04</code>: binary variable indicating whether the specified time-period (year(s)) for that receptor point is <em>partly</em> outside the temporal coverage of CACES air pollution model for one or more of the selected pollutants.
<ul>
<li><code>1</code> indicates that the the specified time-period (year(s)) for that receptor point is <em>partly</em> outside the temporal coverage of CACES air pollution model for one or more of the selected pollutants. Exposure metrics will be calculated based on the years with available data for that specified time-period.<br />
</li>
<li><code>0</code> indicates that the specified time-period (year(s)) for that receptor point is completely within the temporal coverage of CACES air pollution model for all of the selected pollutants.</li>
</ul></li>
</ul>
</div>
</div>
<div id="step-6-caces" class="section level3 hasAnchor" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> Cite Data and Tool<a href="chapter-chords-geo-exposures.html#step-6-caces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Please cite the following in any publications based on this tool:</p>
<p><strong>CACES Empirical Air Pollution Models (v1):</strong></p>
<p>Kim S.-Y.; Bechle, M.; Hankey, S.; Sheppard, L.; Szpiro, A. A.; Marshall, J. D. 2020. “Concentrations of criteria pollutants in the contiguous U.S., 1979 – 2015: Role of prediction model parsimony in integrated empirical geographic regression.” <em>PLoS ONE</em> 15(2), e0228535. DOI: 10.1371/journal.pone.0228535</p>
<p><strong>Census Tract Spatial Boundaries:</strong></p>
<p>Steven Manson, Jonathan Schroeder, David Van Riper, Tracy Kugler, and Steven Ruggles. IPUMS National Historical Geographic Information System: Version 16.0 [Census Tract Shapefiles, 2010]. Minneapolis, MN: IPUMS. 2021. <a href="http://doi.org/10.18128/D050.V16.0" class="uri">http://doi.org/10.18128/D050.V16.0</a></p>
<p>Please see the following for additional requirements: <a href="https://www.nhgis.org/citation-and-use-nhgis-data" class="uri">https://www.nhgis.org/citation-and-use-nhgis-data</a></p>
<p><strong>NIEHS Geospatial Toolbox:</strong></p>
<p><em>Citation to be determined.</em></p>

</div>
</div>
<div id="chapter-geo-exposure-faa" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Airport Proximity<a href="chapter-chords-geo-exposures.html#chapter-geo-exposure-faa" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following are step-by-step instructions to calculate proximity-based exposure metrics to aircraft landing facilities in the United States (US) using <a href="https://adip.faa.gov/agis/public/#/airportSearch/advanced">Federal Aviation Administration (FAA) aircraft landing facility data</a>.</p>
<div id="description-1" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Description<a href="chapter-chords-geo-exposures.html#description-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="faa-aircraft-landing-facility-data" class="section level4 unnumbered hasAnchor">
<h4>FAA Aircraft Landing Facility Data<a href="chapter-chords-geo-exposures.html#faa-aircraft-landing-facility-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The FAA aircraft landing facility data includes a registry of point locations (i.e., coordinates) of arrival and departure of aircraft in the US. FAA provides the following categorization of aircraft landing facility types: airports, heliports, seaplane bases, gliderports, ultralights, and balloonports. FAA also provides the activation year for facilities starting in year 1981.</p>
<p>The following figure illustrates the spatial coverage (all US states) and spatial scale (points) of the FAA aircraft landing facility data:</p>
<center>
<div class="float">
<img src="images/faa_aircraft_landing_facilities_map_2020.jpeg" alt="Illustration of FAA aircraft facility data (a) spatial coverage (United States, including Alaska and Hawaii (not shown)) and (b) spatial scale (points)." />
<div class="figcaption"><em>Illustration of FAA aircraft facility data <strong>(a)</strong> spatial coverage (United States, including Alaska and Hawaii (not shown)) and <strong>(b)</strong> spatial scale (points).</em></div>
</div>
</center>
</div>
<div id="exposure-metrics-1" class="section level4 unnumbered hasAnchor">
<h4>Exposure Metrics<a href="chapter-chords-geo-exposures.html#exposure-metrics-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This tool calculates proximity-based (i.e., distance-based) exposure metrics for a specified list of receptor point locations (e.g., geocoded home addresses) to aircraft landing facilities in a specified year (during 1981-2020). This tool can be used to calculate the following proximity-based metrics within the US:</p>
<ul>
<li>Distance to nearest aircraft landing facility and identity of nearest aircraft landing facility (i.e., identifying codes, facility type, and activation year)</li>
<li>Count of aircraft landing facilities within a specified buffer distance of receptor</li>
<li>Summary metrics of distances to all aircraft landing facilities within a specified buffer distance of receptor (i.e., mean distance, mean of logarithm distance, and 25<sup>th</sup>, 50<sup>th</sup>, and 75<sup>th</sup> percentile distances)</li>
</ul>
<p>Proximity metrics can be calculated for all FAA aircraft landing facility types (i.e., airports, heliports, seaplane bases, gliderports, ultralights, and balloonports) or any subset of them. Output includes information about data missingness (e.g., whether a receptor location is near a US border) as well as an optional log file.</p>
</div>
<div id="recommended-uses-1" class="section level4 unnumbered hasAnchor">
<h4>Recommended Uses<a href="chapter-chords-geo-exposures.html#recommended-uses-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This tool is recommended for the following uses:</p>
<ul>
<li>Applications for which a proximity-based metric is appropriate. <em>Note: This tool does not provide other relevant exposure information associated with aircraft landing facilities, such as traffic (e.g., annual count of arrivals/departures), noise levels, or air pollution levels.</em><br />
</li>
<li>Applications for which most receptor point locations are not located near to a US border with Mexico or Canada. <em>Note: Because this tool does not include aircraft landing facility data for Mexico or Canada, the tool may <strong>under predict</strong> proximity to aircraft landing facilities for receptor point locations in the US near a border with Mexico or Canada with nearby aircraft landing facilities across the border. This tool provides optional output information indicating whether a receptor point is located within a specified distance of a border.</em></li>
</ul>
</div>
<div id="steps-1" class="section level4 unnumbered hasAnchor">
<h4>Steps<a href="chapter-chords-geo-exposures.html#steps-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p><a href="chapter-chords-geo-exposures.html#step-1-faa">Install R and required packages</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-2-faa">Download tool</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-3-faa">Prepare receptor point data</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-4-faa">Run script in R</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-5-faa">Review output</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-6-faa">Cite data and tool</a></p></li>
</ol>
</div>
</div>
<div id="step-1-faa" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Install R and Required Packages<a href="chapter-chords-geo-exposures.html#step-1-faa" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://cran.r-project.org/">Install R</a>. Optionally, <a href="https://www.rstudio.com/products/rstudio/download/">install RStudio</a>.</p>
<p>Then, install the following R packages: <code>logr</code>, <code>tidyverse</code>, <code>sf</code>.
Follow <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Installing-packages">R package installation instructions</a>, or run the following code in R:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="chapter-chords-geo-exposures.html#cb152-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;logr&quot;</span>, <span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;sf&quot;</span>))</span></code></pre></div>
</div>
<div id="step-2-faa" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Download Tool<a href="chapter-chords-geo-exposures.html#step-2-faa" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Download and save the folder containing input data (<code>input_source_aircraft_facilities.rds</code> and <code>input_us_borders.rds</code>) and script (<code>script_aircraft_facility_proximity_for_points.R</code>). To directly run the example scripts provided with these instructions in <a href="chapter-chords-geo-exposures.html#step-4-faa">Step 4</a>, do not change the file names within the folder.</p>
</div>
<div id="step-3-faa" class="section level3 hasAnchor" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Prepare Receptor Point Data<a href="chapter-chords-geo-exposures.html#step-3-faa" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Prepare a comma-separated values (CSV) file that contains a table of the receptor
point locations (e.g., geocoded addresses, coordinates). Include each receptor as
a separate row in the table, and include the following <strong>required</strong> columns:</p>
<ul>
<li><code>id</code>: a unique and anonymous identifying code for each receptor. This can be in character (string) or numeric (double) format<br />
</li>
<li><code>latitude</code>: the latitude of the receptor point location in decimal degrees
format (range: -90 to 90)</li>
<li><code>longitude</code>: the longitude of the receptor point location in decimal
degrees format (range: -180 to 180)</li>
</ul>
<p>The following table provides an example of the receptor point data format:</p>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>latitude</th>
<th>longitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1011A</td>
<td>39.00205369</td>
<td>-77.105578716</td>
</tr>
<tr class="even">
<td>1012C</td>
<td>35.88480215</td>
<td>-78.877942573</td>
</tr>
<tr class="odd">
<td>1013E</td>
<td>39.43560788</td>
<td>-77.434847823</td>
</tr>
</tbody>
</table>
<p>To directly run the example scripts provided with these instructions, save the receptor point data as <code>input_receptor.csv</code> in the folder.</p>
</div>
<div id="step-4-faa" class="section level3 hasAnchor" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> Run Script in R<a href="chapter-chords-geo-exposures.html#step-4-faa" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Run the script <code>script_aircraft_facility_proximity_for_points.R</code> to load the required functions in R. You can then use the function <code>get_aircraft_facility_proximity_for_points()</code> to calculate proximity-based exposure metrics for each receptor point location.</p>
<div id="description-of-function-get_aircraft_facility_proximity_for_points" class="section level4 unnumbered hasAnchor">
<h4>Description of Function <code>get_aircraft_facility_proximity_for_points()</code><a href="chapter-chords-geo-exposures.html#description-of-function-get_aircraft_facility_proximity_for_points" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This function takes the receptor point data above and returns a data frame with the receptor identifying code linked to the selected aircraft landing facility proximity metrics for selected aircraft landing facility types and year (during 1981 to 2020) as well as information about data missingness. Optionally, the function also writes a log file in the current R working directory. The function has the following arguments:</p>
<p><strong>Required Arguments</strong></p>
<ul>
<li><code>receptor_filepath</code>: specifies the file path to a CSV file containing the receptor point locations (described in <a href="chapter-chords-geo-exposures.html#step-3-faa">Step 3</a>). <em>Note: The format for file paths in R can vary by operating system.</em><br />
</li>
<li><code>source_aircraft_facilities_filepath</code>: specifies the file path to a RDS file containing a simple features object with the point locations of FAA aircraft landing facilities. This is the file <code>input_source_aircraft_facilities.rds</code>.<br />
</li>
<li><code>us_borders_filepath</code>: specifies the file path to a RDS file containing a simple features object with the US borders with Mexico and Canada. This is the file <code>input_us_borders.rds</code>.</li>
<li><code>aircraft_year</code>: specifies a single year (in YYYY format; e.g., 2003) for proximity-based exposure assessment across all pollutants. Default is <code>NULL</code>. Year must be during 1981 to 2020. Aircraft landing facilities activated after <code>aircraft_year</code> will be excluded from calculation of the proximity metrics.</li>
</ul>
<p><strong>Optional Arguments</strong></p>
<ul>
<li><code>buffer_distance_km</code>: a numeric argument that specifies the buffer distance (units: kilometers [km]) to use in calculation of buffer-based proximity metrics. Default is <code>10</code> km. Must be between 0.001 km and 1000 km. <em>Note: Larger buffer distance values may result in longer run-times for buffer-based proximity metrics.</em></li>
<li><code>receptor_crs</code>: a coordinate reference system object (i.e., <a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/OverviewCoordinateReferenceSystems.pdf">class is <code>crs</code> object in R</a>) for the receptor point locations. Default is <code>"EPSG:4269"</code> (i.e., NAD83).</li>
<li><code>projection_crs</code>: a projected coordinate reference system object (i.e., <a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/OverviewCoordinateReferenceSystems.pdf">class is <code>crs</code> object in R</a>) for use in exposure assessment. Default is <code>"ESRI:102008"</code> (i.e., North America Albers Equal Area Conic projection).</li>
<li><code>aircraft_facility_type</code>: list that specifies the subset of FAA aircraft landing facility types to include in the exposure assessment. Default is all types: <code>"airport", "heliport", "seaplane base", "gliderport", "ultralight", "balloonport"</code>.<br />
</li>
<li><code>proximity_metrics</code>: list that specifies the subset of proximity-based exposure metrics to calculate. Default is all metrics: <code>"distance_to_nearest, "count_in_buffer", "distance_in_buffer"</code>.
<ul>
<li><code>"distance_to_nearest"</code>: returns output with distance to nearest aircraft landing facility (units: km) and identity of nearest aircraft landing facility (i.e., identifying codes, facility type, and activation year) for each receptor<br />
</li>
<li><code>"count_in_buffer"</code>: returns output with count of aircraft landing facilities within a specified buffer distance of each receptor<br />
</li>
<li><code>"distance_in_buffer"</code>: returns output with summary metrics of distances to all aircraft landing facilities within the specified buffer distance of receptor (i.e., mean distance, mean of logarithm distance, and 25<sup>th</sup>, 50<sup>th</sup>, and 75<sup>th</sup> percentile distances to all aircraft landing facilities for each receptor)</li>
</ul></li>
<li><code>check_near_us_border</code>: logical argument that specifies whether the function should identify receptor points that are within the buffer distance (i.e., specified by argument <code>buffer_distance_km</code>) of a US border with Canada or Mexico. <code>TRUE</code> returns a column with output (<code>within_border_buffer</code>) with a binary variable indicating receptor points within the buffer distance of a border. Default is <code>TRUE</code>. <em>Note: The aircraft landing facility data covers only facilities located within the US. Thus, this tool may under predict proximity to aircraft landing facilities for receptor locations near a US border with Canada or Mexico.</em><br />
</li>
<li><code>add_all_input_to_output</code>: logical argument that specifies whether the output of the function should include all columns included with the input receptor data frame or not. <code>TRUE</code> returns all columns (i.e., including latitude and longitude) with output. <code>FALSE</code> returns only the anonymous receptor identifying code, proximity-based metrics, and data missingness information with output. <code>FALSE</code> may be useful for meeting data de-identification requirements. Default is <code>TRUE</code>.<br />
</li>
<li><code>write_log_to_file</code>: logical argument that specifies whether a log should be written to file. <code>TRUE</code> will create a log file in the current working directory. Default is <code>TRUE</code>.<br />
</li>
<li><code>print_log_to_console</code>: logical argument that specifies whether a log should be printed to the console. <code>TRUE</code> will print a log to console. Default is <code>TRUE</code>.</li>
</ul>
</div>
<div id="example-use-1" class="section level4 unnumbered hasAnchor">
<h4>Example Use<a href="chapter-chords-geo-exposures.html#example-use-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Below are two example scripts for using the function above to produce a CSV file with the proximiity-based exposure estimates for each receptor to airports in year 2020 (using default options for all other optional arguments). The first example uses only R but requires editing the file paths. The second example requires RStudio and the <code>here</code> package but does not require editing file paths.</p>
<p><strong>Example 1: Base R</strong></p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="chapter-chords-geo-exposures.html#cb153-1" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb153-2"><a href="chapter-chords-geo-exposures.html#cb153-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb153-3"><a href="chapter-chords-geo-exposures.html#cb153-3" tabindex="-1"></a><span class="fu">library</span>(logr)</span>
<span id="cb153-4"><a href="chapter-chords-geo-exposures.html#cb153-4" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb153-5"><a href="chapter-chords-geo-exposures.html#cb153-5" tabindex="-1"></a></span>
<span id="cb153-6"><a href="chapter-chords-geo-exposures.html#cb153-6" tabindex="-1"></a><span class="co"># Load functions</span></span>
<span id="cb153-7"><a href="chapter-chords-geo-exposures.html#cb153-7" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;/set/file/path/to/script_aircraft_facility_proximity_for_points.R&quot;</span>)</span>
<span id="cb153-8"><a href="chapter-chords-geo-exposures.html#cb153-8" tabindex="-1"></a></span>
<span id="cb153-9"><a href="chapter-chords-geo-exposures.html#cb153-9" tabindex="-1"></a><span class="co"># Get exposures</span></span>
<span id="cb153-10"><a href="chapter-chords-geo-exposures.html#cb153-10" tabindex="-1"></a>aircraft_proximity_metrics <span class="ot">&lt;-</span></span>
<span id="cb153-11"><a href="chapter-chords-geo-exposures.html#cb153-11" tabindex="-1"></a>  <span class="fu">get_aircraft_facility_proximity_for_points</span>(</span>
<span id="cb153-12"><a href="chapter-chords-geo-exposures.html#cb153-12" tabindex="-1"></a>    <span class="at">receptor_filepath =</span> <span class="st">&quot;/set/file/path/to/input_receptor.csv&quot;</span>,</span>
<span id="cb153-13"><a href="chapter-chords-geo-exposures.html#cb153-13" tabindex="-1"></a>    <span class="at">source_aircraft_facilities_filepath =</span></span>
<span id="cb153-14"><a href="chapter-chords-geo-exposures.html#cb153-14" tabindex="-1"></a>    <span class="st">&quot;/set/file/path/to/input_source_aircraft_facilities.rds&quot;</span>,</span>
<span id="cb153-15"><a href="chapter-chords-geo-exposures.html#cb153-15" tabindex="-1"></a>    <span class="at">us_borders_filepath =</span></span>
<span id="cb153-16"><a href="chapter-chords-geo-exposures.html#cb153-16" tabindex="-1"></a>    <span class="st">&quot;/set/file/path/to/input_us_borders.rds&quot;</span>,</span>
<span id="cb153-17"><a href="chapter-chords-geo-exposures.html#cb153-17" tabindex="-1"></a>    <span class="at">aircraft_year =</span> <span class="dv">2020</span>,</span>
<span id="cb153-18"><a href="chapter-chords-geo-exposures.html#cb153-18" tabindex="-1"></a>    <span class="at">aircraft_facility_type =</span> <span class="st">&quot;airport&quot;</span></span>
<span id="cb153-19"><a href="chapter-chords-geo-exposures.html#cb153-19" tabindex="-1"></a>  )</span>
<span id="cb153-20"><a href="chapter-chords-geo-exposures.html#cb153-20" tabindex="-1"></a></span>
<span id="cb153-21"><a href="chapter-chords-geo-exposures.html#cb153-21" tabindex="-1"></a><span class="co"># Write exposures to CSV</span></span>
<span id="cb153-22"><a href="chapter-chords-geo-exposures.html#cb153-22" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(aircraft_proximity_metrics,</span>
<span id="cb153-23"><a href="chapter-chords-geo-exposures.html#cb153-23" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;/set/file/path/to/output_aircraft_proximity_metrics.csv&quot;</span></span>
<span id="cb153-24"><a href="chapter-chords-geo-exposures.html#cb153-24" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Example 2: RStudio with <code>here</code> Package</strong></p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="chapter-chords-geo-exposures.html#cb154-1" tabindex="-1"></a><span class="co"># Install here package (if needed)</span></span>
<span id="cb154-2"><a href="chapter-chords-geo-exposures.html#cb154-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb154-3"><a href="chapter-chords-geo-exposures.html#cb154-3" tabindex="-1"></a></span>
<span id="cb154-4"><a href="chapter-chords-geo-exposures.html#cb154-4" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb154-5"><a href="chapter-chords-geo-exposures.html#cb154-5" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb154-6"><a href="chapter-chords-geo-exposures.html#cb154-6" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb154-7"><a href="chapter-chords-geo-exposures.html#cb154-7" tabindex="-1"></a><span class="fu">library</span>(logr)</span>
<span id="cb154-8"><a href="chapter-chords-geo-exposures.html#cb154-8" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb154-9"><a href="chapter-chords-geo-exposures.html#cb154-9" tabindex="-1"></a></span>
<span id="cb154-10"><a href="chapter-chords-geo-exposures.html#cb154-10" tabindex="-1"></a><span class="co"># Set location</span></span>
<span id="cb154-11"><a href="chapter-chords-geo-exposures.html#cb154-11" tabindex="-1"></a>here<span class="sc">::</span><span class="fu">i_am</span>(<span class="st">&quot;script_aircraft_facility_proximity_for_points.R&quot;</span>)</span>
<span id="cb154-12"><a href="chapter-chords-geo-exposures.html#cb154-12" tabindex="-1"></a></span>
<span id="cb154-13"><a href="chapter-chords-geo-exposures.html#cb154-13" tabindex="-1"></a><span class="co"># Load functions</span></span>
<span id="cb154-14"><a href="chapter-chords-geo-exposures.html#cb154-14" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;script_aircraft_facility_proximity_for_points.R&quot;</span>))</span>
<span id="cb154-15"><a href="chapter-chords-geo-exposures.html#cb154-15" tabindex="-1"></a></span>
<span id="cb154-16"><a href="chapter-chords-geo-exposures.html#cb154-16" tabindex="-1"></a><span class="co"># Get exposures</span></span>
<span id="cb154-17"><a href="chapter-chords-geo-exposures.html#cb154-17" tabindex="-1"></a>aircraft_proximity_metrics <span class="ot">&lt;-</span></span>
<span id="cb154-18"><a href="chapter-chords-geo-exposures.html#cb154-18" tabindex="-1"></a>  <span class="fu">get_aircraft_facility_proximity_for_points</span>(</span>
<span id="cb154-19"><a href="chapter-chords-geo-exposures.html#cb154-19" tabindex="-1"></a>    <span class="at">receptor_filepath =</span> <span class="fu">here</span>(<span class="st">&quot;input_receptor.csv&quot;</span>),</span>
<span id="cb154-20"><a href="chapter-chords-geo-exposures.html#cb154-20" tabindex="-1"></a>    <span class="at">source_aircraft_facilities_filepath =</span></span>
<span id="cb154-21"><a href="chapter-chords-geo-exposures.html#cb154-21" tabindex="-1"></a>    <span class="fu">here</span>(<span class="st">&quot;input_source_aircraft_facilities.rds&quot;</span>),</span>
<span id="cb154-22"><a href="chapter-chords-geo-exposures.html#cb154-22" tabindex="-1"></a>    <span class="at">us_borders_filepath =</span> <span class="fu">here</span>(<span class="st">&quot;input_us_borders.rds&quot;</span>),</span>
<span id="cb154-23"><a href="chapter-chords-geo-exposures.html#cb154-23" tabindex="-1"></a>    <span class="at">aircraft_year =</span> <span class="dv">2020</span>,</span>
<span id="cb154-24"><a href="chapter-chords-geo-exposures.html#cb154-24" tabindex="-1"></a>    <span class="at">aircraft_facility_type =</span> <span class="st">&quot;airport&quot;</span></span>
<span id="cb154-25"><a href="chapter-chords-geo-exposures.html#cb154-25" tabindex="-1"></a>  )</span>
<span id="cb154-26"><a href="chapter-chords-geo-exposures.html#cb154-26" tabindex="-1"></a></span>
<span id="cb154-27"><a href="chapter-chords-geo-exposures.html#cb154-27" tabindex="-1"></a><span class="co"># Write exposures to CSV</span></span>
<span id="cb154-28"><a href="chapter-chords-geo-exposures.html#cb154-28" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(aircraft_proximity_metrics,</span>
<span id="cb154-29"><a href="chapter-chords-geo-exposures.html#cb154-29" tabindex="-1"></a>  <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;output_aircraft_proximity_metrics.csv&quot;</span>)</span>
<span id="cb154-30"><a href="chapter-chords-geo-exposures.html#cb154-30" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="step-5-faa" class="section level3 hasAnchor" number="5.3.6">
<h3><span class="header-section-number">5.3.6</span> Review Output<a href="chapter-chords-geo-exposures.html#step-5-faa" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="log-file-1" class="section level4 unnumbered hasAnchor">
<h4>Log File<a href="chapter-chords-geo-exposures.html#log-file-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After running the example script above, with the log file option selected, the log
file will be available in the folder <code>log</code> in the current R working directory.</p>
</div>
<div id="output-data-1" class="section level4 unnumbered hasAnchor">
<h4>Output Data<a href="chapter-chords-geo-exposures.html#output-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After running the example script above, calculated proximity-based exposure metrics for receptor locations will be available in the file <code>output_aircraft_proximity_metrics.csv</code> within the folder. This CSV file includes a row for each receptor with the following columns (as applicable):</p>
<p><strong>Identifiers</strong></p>
<ul>
<li><code>id</code>: the unique and anonymous identifying code for each receptor</li>
</ul>
<p><strong>Calculated Proximity-Based Exposure Metrics</strong></p>
<p><strong><em>Nearest Distance Metrics</em></strong></p>
<ul>
<li><code>aircraft_nearest_distance_km</code>: distance (units: km) to the nearest aircraft landing facility<br />
</li>
<li><code>aircraft_nearest_id_site_num</code>: the unique identifying FAA site number for the nearest aircraft landing facility. Consists of a numeric code followed by a letter indicating the aircraft landing facility type. For example, the site number for the Los Angeles International Airport is <code>01818.*A</code>. The FAA site number can be used to link additional types of <a href="https://adip.faa.gov/agis/public/#/airportSearch/advanced">FAA data</a> (e.g., annual operations) for further analyses.<br />
</li>
<li><code>aircraft_nearest_id_loc</code>: the unique identifying location code for the nearest aircraft landing facility. Consists of a 3 or 4 character alphanumeric code. For example, the location code for the Los Angeles International Airport is <code>LAX</code>. The location code can be used to link additional types of <a href="https://adip.faa.gov/agis/public/#/airportSearch/advanced">FAA data</a> (e.g., annual operations) for further analyses.<br />
</li>
<li><code>aircraft_nearest_fac_type</code>: the type (i.e., airport, heliport, seaplane base, gliderport, ultralight, and balloonport) of the nearest aircraft landing facility</li>
<li><code>aircraft_nearest_year_activation</code>: the year of activation of the nearest aircraft landing facility. Activation year is available for all facilities starting in 1981.</li>
</ul>
<p><strong><em>Count in Buffer Metrics</em></strong></p>
<ul>
<li><code>aircraft_count_in_buffer</code>: number of aircraft landing facilities within the specified buffer distance of each receptor</li>
</ul>
<p><strong><em>Distance in Buffer Metrics</em></strong></p>
<ul>
<li><code>aircraft_mean_distance_in_buffer</code>: mean of distances (units: km) to all aircraft landing facilities within the specified buffer distance of receptor. <code>NA</code> indicates that no landing facilities are within the specified buffer distance of the receptor. <em>Note: In cases with exactly one aircraft landing facility within the specified buffer distance, the value will be the distance to that aircraft landing facility.</em></li>
<li><code>aircraft_log_mean_distance_in_buffer</code>: mean of logarithm of distances (units: km) to all aircraft landing facilities within the specified buffer distance of receptor. <code>NA</code> indicates that no landing facilities are within the specified buffer distance of the receptor. <em>Note: In cases with exactly one aircraft landing facility within the specified buffer distance, the value will be the logarithm of the distance to that aircraft landing facility.</em></li>
<li><code>aircraft_p25_distance_in_buffer</code>: 25<sup>th</sup> percentile of distances (units: km) to all aircraft landing facilities within the specified buffer distance of receptor, for cases with at least 10 aircraft landing facilities within the buffer distance. <code>NA</code> indicates that less than 10 aircraft landing facilities are within the buffer distance.</li>
<li><code>aircraft_p50_distance_in_buffer</code>: 50<sup>th</sup> percentile (i.e., median) of distances (units: km) to all aircraft landing facilities within the specified buffer distance of receptor, for cases with at least 10 aircraft landing facilities within the buffer distance. <code>NA</code> indicates that less than 10 aircraft landing facilities are within the buffer distance.</li>
<li><code>aircraft_p75_distance_in_buffer</code>: 75<sup>th</sup> percentile of distances (units: km) to all aircraft landing facilities within the specified buffer distance of receptor, for cases with at least 10 aircraft landing facilities within the buffer distance. <code>NA</code> indicates that less than 10 aircraft landing facilities are within the buffer distance.</li>
</ul>
<p><strong>Information on Data Missingness</strong></p>
<ul>
<li><code>within_border_buffer</code>: binary variable indicating whether receptor point is located within the buffer distance (i.e., specified by argument <code>buffer_distance_km</code>) of a US border with Canada or Mexico:
<ul>
<li><code>1</code> indicates that receptor point is located within the buffer distance of a US border with Canada or Mexico. This indicates that the proximity-based metrics calculated by this tool may represent under predictions of the true proximity-based metrics (i.e., the nearest aircraft landing facility may be located in Canada or Mexico, outside the coverage of the US aircraft landing facility dataset).<br />
</li>
<li><code>0</code> indicates that receptor point is <strong>not</strong> located within the buffer distance of a US border with Canada or Mexico.</li>
</ul></li>
</ul>
</div>
</div>
<div id="step-6-faa" class="section level3 hasAnchor" number="5.3.7">
<h3><span class="header-section-number">5.3.7</span> Cite Data and Tool<a href="chapter-chords-geo-exposures.html#step-6-faa" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Please cite the following in any publications based on this tool:</p>
<p><strong>Aircraft Landing Facility Data:</strong></p>
<p>US Federal Aviation Administration (FAA). <em>Airport Data and Information Portal (ADIP)</em>. [Available: <a href="https://adip.faa.gov/agis/public/#/airportSearch/advanced" class="uri">https://adip.faa.gov/agis/public/#/airportSearch/advanced</a>]. Accessed: April 24, 2022.</p>
<p>Homeland Infrastructure Foundation-Level Data (HIFLD) Geoplatform. <em>Aircraft landing facilities geospatial data</em>. [Available: <a href="https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform" class="uri">https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform</a>::aircraft-landing-facilities/about]. Accessed: June 23, 2022.</p>
<p><strong>US Borders:</strong></p>
<p>Homeland Infrastructure Foundation-Level Data (HIFLD) Geoplatform. <em>Canada and US border geospatial data</em>. [Available: <a href="https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform" class="uri">https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform</a>::canada-and-us-border/about]. Accessed: June 23, 2022.</p>
<p>Homeland Infrastructure Foundation-Level Data (HIFLD) Geoplatform. <em>Mexico and US border geospatial data</em>. [Available: <a href="https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform" class="uri">https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform</a>::mexico-and-us-border/about]. Accessed: June 23, 2022.</p>
<p><strong>NIEHS Geospatial Toolbox:</strong></p>
<p><em>Citation to be determined.</em></p>

</div>
</div>
<div id="chapter-geo-exposure-roads" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Major Road Proximity<a href="chapter-chords-geo-exposures.html#chapter-geo-exposure-roads" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following are step-by-step instructions to calculate proximity-based exposure metrics to major roadways in the United States (US) using US NASA (National Aeronautics and Space Administration) Socioeconomic Data and Applications Center (SEDAC) <a href="https://doi.org/10.7927/H4VD6WCT">Global Roads Open Access Data Set (Version 1)</a>.</p>
<div id="description-2" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Description<a href="chapter-chords-geo-exposures.html#description-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="nasa-sedac-roads-data" class="section level4 unnumbered hasAnchor">
<h4>NASA SEDAC Roads Data<a href="chapter-chords-geo-exposures.html#nasa-sedac-roads-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The NASA SEDAC global data includes the locations of major roads (i.e., lines indicating roadway center lines) for the US in 2005. Major roads are categorized based on social and economic importance as follows:</p>
<table>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>Major road classification</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Highways</td>
<td>Limited access divided highways connecting major cities.</td>
</tr>
<tr class="even">
<td>Primary roads</td>
<td>Other primary major roads between and into major cities as well as primary arterial roads.</td>
</tr>
<tr class="odd">
<td>Secondary roads</td>
<td>Other secondary roads between and into cities as well as secondary arterial roads.</td>
</tr>
</tbody>
</table>
<p>Other types of roads, such as tertiary roads, local roads, trails, and private roads, are not included.</p>
<p>The following figure illustrates the spatial coverage (all US states and territories) and spatial scale (lines) of the SEDAC roads data:</p>
<center>
<div class="float">
<img src="images/sedac_major_roads_map_2005.jpeg" alt="Illustration of NASA SEDAC major roads data (a) spatial coverage (United States, including Alaska, Hawaii, and US territories (not shown)) and (b) spatial scale (lines)." />
<div class="figcaption"><em>Illustration of NASA SEDAC major roads data <strong>(a)</strong> spatial coverage (United States, including Alaska, Hawaii, and US territories (not shown)) and <strong>(b)</strong> spatial scale (lines).</em></div>
</div>
</center>
</div>
<div id="exposure-metrics-2" class="section level4 unnumbered hasAnchor">
<h4>Exposure Metrics<a href="chapter-chords-geo-exposures.html#exposure-metrics-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This tool calculates proximity-based (i.e., distance-based) exposure metrics for a specified list of receptor point locations (e.g., geocoded home addresses) to major roads in year 2005. This tool can be used to calculate the following proximity-based metrics within the US:</p>
<ul>
<li>Distance to nearest major road and classification of nearest major road</li>
<li>Length of road within a specified buffer distance of receptor</li>
</ul>
<p>These proximity-based metrics can be calculated for all available major road classifications (i.e., highways, primary roads, and secondary roads) or any subset of them. Output includes information about data missingness (e.g., whether a receptor location is near a US border) as well as an optional log file.</p>
</div>
<div id="recommended-uses-2" class="section level4 unnumbered hasAnchor">
<h4>Recommended Uses<a href="chapter-chords-geo-exposures.html#recommended-uses-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This tool is recommended for the following uses:</p>
<ul>
<li>Applications for which a proximity-based metric is appropriate. <em>Note: This tool does <strong>not</strong> provide other relevant exposure information associated with roads, such as traffic, noise levels, or air pollution levels.</em><br />
</li>
<li>Analyses focused on exposures related specifically to major roads. <em>Note: This tool does <strong>not</strong> include data for other road classifications, such as local street networks or trails.</em><br />
</li>
<li>Applications for which most receptor point locations are not located in communities with sections of tunneled or elevated highways. <em>Note: This tool does <strong>not</strong> provide information about whether roads are at surface level (e.g., elevated, tunneled, etc.). Exposure implications of roadway proximity may differ depending on whether road is at surface level. Some urban highways have varying tunneled, surface-level, or elevated sections (e.g., tunneled sections of US Interstate 90 in Boston, Massachusetts, and in Seattle, Washington).</em><br />
</li>
<li>Applications for which most receptor point locations are not located near to a US border with Mexico or Canada. <em>Note: Because this tool does not include roadway data for Mexico or Canada, the tool may <strong>under predict</strong> proximity to major roads for receptor point locations in the US near a border with Mexico or Canada with nearby major roads across the border. This tool provides optional output information indicating whether a receptor point is located within a specified distance of a border.</em></li>
</ul>
</div>
<div id="steps-2" class="section level4 unnumbered hasAnchor">
<h4>Steps<a href="chapter-chords-geo-exposures.html#steps-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p><a href="chapter-chords-geo-exposures.html#step-1-roads">Install R and required packages</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-2-roads">Download tool</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-3-roads">Prepare receptor point data</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-4-roads">Run script in R</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-5-roads">Review output</a></p></li>
<li><p><a href="chapter-chords-geo-exposures.html#step-6-roads">Cite data and tool</a></p></li>
</ol>
</div>
</div>
<div id="step-1-roads" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Install R and required packages<a href="chapter-chords-geo-exposures.html#step-1-roads" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://cran.r-project.org/">Install R</a>. Optionally, <a href="https://www.rstudio.com/products/rstudio/download/">install RStudio</a>.</p>
<p>Then, install the following R packages: <code>logr</code>, <code>tidyverse</code>, <code>sf</code>.
Follow <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Installing-packages">R package installation instructions</a>, or run the following code in R:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="chapter-chords-geo-exposures.html#cb155-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;logr&quot;</span>, <span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;sf&quot;</span>))</span></code></pre></div>
</div>
<div id="step-2-roads" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Download Tool<a href="chapter-chords-geo-exposures.html#step-2-roads" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Download and save the folder containing input data (<code>input_source_major_roads.rds</code> and <code>input_us_borders.rds</code>) and script (<code>script_major_road_proximity_for_points.R</code>). To directly run the example scripts provided with these instructions in <a href="chapter-chords-geo-exposures.html#step-4-roads">Step 4</a>, do not change the file names within the folder.</p>
</div>
<div id="step-3-roads" class="section level3 hasAnchor" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Prepare Receptor Point Data<a href="chapter-chords-geo-exposures.html#step-3-roads" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Prepare a comma-separated values (CSV) file that contains a table of the receptor
point locations (e.g., geocoded addresses, coordinates). Include each receptor as
a separate row in the table, and include the following <strong>required</strong> columns:</p>
<ul>
<li><code>id</code>: a unique and anonymous identifying code for each receptor. This can be in character (string) or numeric (double) format<br />
</li>
<li><code>latitude</code>: the latitude of the receptor point location in decimal degrees
format (range: -90 to 90)</li>
<li><code>longitude</code>: the longitude of the receptor point location in decimal
degrees format (range: -180 to 180)</li>
</ul>
<p>The following table provides an example of the receptor point data format:</p>
<table>
<thead>
<tr class="header">
<th>id</th>
<th>latitude</th>
<th>longitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1011A</td>
<td>39.00205369</td>
<td>-77.105578716</td>
</tr>
<tr class="even">
<td>1012C</td>
<td>35.88480215</td>
<td>-78.877942573</td>
</tr>
<tr class="odd">
<td>1013E</td>
<td>39.43560788</td>
<td>-77.434847823</td>
</tr>
</tbody>
</table>
<p>To directly run the example scripts provided with these instructions, save the receptor point data as <code>input_receptor.csv</code> in the folder.</p>
</div>
<div id="step-4-roads" class="section level3 hasAnchor" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> Run script in R<a href="chapter-chords-geo-exposures.html#step-4-roads" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Run the script <code>script_major_road_proximity_for_points.R</code> to load the required functions in R. You can then use the function <code>get_major_road_proximity_for_points()</code> to calculate proximity-based exposure metrics for each receptor point location.</p>
<div id="description-of-function-get_major_road_proximity_for_points" class="section level4 unnumbered hasAnchor">
<h4>Description of Function <code>get_major_road_proximity_for_points()</code><a href="chapter-chords-geo-exposures.html#description-of-function-get_major_road_proximity_for_points" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This function takes the receptor point data above and returns a data frame with the receptor identifying code linked to the selected major road facility proximity metrics for selected raod class(es) as well as information about data missingness. Optionally, the function also writes a log file in the current R working directory. The function has the following arguments:</p>
<p><strong>Required Arguments</strong></p>
<ul>
<li><code>receptor_filepath</code>: specifies the file path to a CSV file containing the receptor point locations (described in <a href="chapter-chords-geo-exposures.html#step-3-roads">Step 3</a>). <em>Note: The format for file paths in R can vary by operating system.</em><br />
</li>
<li><code>source_major_roads_filepath</code>: specifies the file path to a RDS file containing a simple features object with the line locations of NASA SEDAC major roads in the US. This is the file <code>input_source_major_roads.rds</code>.<br />
</li>
<li><code>us_borders_filepath</code>: specifies the file path to a RDS file containing a simple features object with the US borders with Mexico and Canada. This is the file <code>input_us_borders.rds</code>.</li>
</ul>
<p><strong>Optional Arguments</strong></p>
<ul>
<li><code>buffer_distance_km</code>: a numeric argument that specifies the buffer distance (units: kilometers [km]) to use in calculation of buffer-based proximity metrics. Default is <code>1</code> km. Must be between 0.001 km and 1000 km. <em>Note: Larger buffer distance values may result in longer run-times for buffer-based proximity metrics.</em></li>
<li><code>receptor_crs</code>: a coordinate reference system object (i.e., <a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/OverviewCoordinateReferenceSystems.pdf">class is <code>crs</code> object in R</a>) for the receptor point locations. Default is <code>"EPSG:4269"</code> (i.e., NAD83).<br />
</li>
<li><code>projection_crs</code>: a projected coordinate reference system object (i.e., <a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/OverviewCoordinateReferenceSystems.pdf">class is <code>crs</code> object in R</a>) for use in exposure assessment. Default is <code>"ESRI:102008"</code> (i.e., North America Albers Equal Area Conic projection).</li>
<li><code>road_class_selection</code>: list that specifies the subset of major road types to include in the exposure assessment. Default is all types: <code>"highway", "primary road", "secondary road", "unspecified"</code>.<br />
</li>
<li><code>proximity_metrics</code>: list that specifies the subset of proximity-based exposure metrics to calculate. Default is all metrics: <code>"distance_to_nearest,  "length_in_buffer"</code>.
<ul>
<li><code>"distance_to_nearest"</code>: returns output with distance to nearest major road (units: km) and classification of nearest major road (e.g., highway) for each receptor<br />
</li>
<li><code>"length_in_buffer"</code>: returns output with the length (units: km) of all major roads of the selected class(es) within the specified buffer distance of receptor<br />
</li>
</ul></li>
<li><code>check_near_us_border</code>: logical argument that specifies whether the function should identify receptor points that are within the buffer distance (i.e., specified by argument <code>buffer_distance_km</code>) of a US border with Canada or Mexico. <code>TRUE</code> returns a column with output (<code>within_border_buffer</code>) with a binary variable indicating receptor points within the buffer distance of a border. Default is <code>TRUE</code>. <em>Note: This tool includes only road data for US states and territories. Thus, this tool may under predict proximity to major roads for receptor locations near a US border with Canada or Mexico.</em><br />
</li>
<li><code>add_all_input_to_output</code>: logical argument that specifies whether the output of the function should include all columns included with the input receptor data frame or not. <code>TRUE</code> returns all columns (i.e., including latitude and longitude) with output. <code>FALSE</code> returns only the anonymous receptor identifying code, proximity-based metrics, and data missingness information with output. <code>FALSE</code> may be useful for meeting data de-identification requirements. Default is <code>TRUE</code>.<br />
</li>
<li><code>write_log_to_file</code>: logical argument that specifies whether a log should be written to file. <code>TRUE</code> will create a log file in the current working directory. Default is <code>TRUE</code>.<br />
</li>
<li><code>print_log_to_console</code>: logical argument that specifies whether a log should be printed to the console. <code>TRUE</code> will print a log to console. Default is <code>TRUE</code>.</li>
</ul>
</div>
<div id="example-use-2" class="section level4 unnumbered hasAnchor">
<h4>Example Use<a href="chapter-chords-geo-exposures.html#example-use-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Below are two example scripts for using the function above to produce a CSV file with the proximity-based exposure estimates for each receptor to highways (using default options for all other optional arguments). The first example uses only R but requires editing the file paths. The second example requires RStudio and the <code>here</code> package but does not require editing file paths.</p>
<p><strong>Example 1: Base R</strong></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="chapter-chords-geo-exposures.html#cb156-1" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb156-2"><a href="chapter-chords-geo-exposures.html#cb156-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb156-3"><a href="chapter-chords-geo-exposures.html#cb156-3" tabindex="-1"></a><span class="fu">library</span>(logr)</span>
<span id="cb156-4"><a href="chapter-chords-geo-exposures.html#cb156-4" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb156-5"><a href="chapter-chords-geo-exposures.html#cb156-5" tabindex="-1"></a></span>
<span id="cb156-6"><a href="chapter-chords-geo-exposures.html#cb156-6" tabindex="-1"></a><span class="co"># Load functions</span></span>
<span id="cb156-7"><a href="chapter-chords-geo-exposures.html#cb156-7" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;/set/file/path/to/script_major_road_proximity_for_points.R&quot;</span>)</span>
<span id="cb156-8"><a href="chapter-chords-geo-exposures.html#cb156-8" tabindex="-1"></a></span>
<span id="cb156-9"><a href="chapter-chords-geo-exposures.html#cb156-9" tabindex="-1"></a><span class="co"># Get proximity-based exposures</span></span>
<span id="cb156-10"><a href="chapter-chords-geo-exposures.html#cb156-10" tabindex="-1"></a>major_road_proximity_metrics <span class="ot">&lt;-</span></span>
<span id="cb156-11"><a href="chapter-chords-geo-exposures.html#cb156-11" tabindex="-1"></a>  <span class="fu">get_major_road_proximity_for_points</span>(</span>
<span id="cb156-12"><a href="chapter-chords-geo-exposures.html#cb156-12" tabindex="-1"></a>    <span class="at">receptor_filepath =</span> <span class="st">&quot;/set/file/path/to/input_receptor.csv&quot;</span>,</span>
<span id="cb156-13"><a href="chapter-chords-geo-exposures.html#cb156-13" tabindex="-1"></a>    <span class="at">source_major_roads_filepath =</span></span>
<span id="cb156-14"><a href="chapter-chords-geo-exposures.html#cb156-14" tabindex="-1"></a>    <span class="st">&quot;/set/file/path/to/input_source_major_roads.rds&quot;</span>,</span>
<span id="cb156-15"><a href="chapter-chords-geo-exposures.html#cb156-15" tabindex="-1"></a>    <span class="at">us_borders_filepath =</span></span>
<span id="cb156-16"><a href="chapter-chords-geo-exposures.html#cb156-16" tabindex="-1"></a>    <span class="st">&quot;/set/file/path/to/input_us_borders.rds&quot;</span>,</span>
<span id="cb156-17"><a href="chapter-chords-geo-exposures.html#cb156-17" tabindex="-1"></a>    <span class="at">road_class_selection =</span> <span class="st">&quot;highway&quot;</span></span>
<span id="cb156-18"><a href="chapter-chords-geo-exposures.html#cb156-18" tabindex="-1"></a>  )</span>
<span id="cb156-19"><a href="chapter-chords-geo-exposures.html#cb156-19" tabindex="-1"></a></span>
<span id="cb156-20"><a href="chapter-chords-geo-exposures.html#cb156-20" tabindex="-1"></a><span class="co"># Write exposures to CSV</span></span>
<span id="cb156-21"><a href="chapter-chords-geo-exposures.html#cb156-21" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(major_road_proximity_metrics,</span>
<span id="cb156-22"><a href="chapter-chords-geo-exposures.html#cb156-22" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;/set/file/path/to/output_major_road_proximity_metrics.csv&quot;</span></span>
<span id="cb156-23"><a href="chapter-chords-geo-exposures.html#cb156-23" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Example 2: RStudio with <code>here</code> Package</strong></p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="chapter-chords-geo-exposures.html#cb157-1" tabindex="-1"></a><span class="co"># Install here package (if needed)</span></span>
<span id="cb157-2"><a href="chapter-chords-geo-exposures.html#cb157-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb157-3"><a href="chapter-chords-geo-exposures.html#cb157-3" tabindex="-1"></a></span>
<span id="cb157-4"><a href="chapter-chords-geo-exposures.html#cb157-4" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb157-5"><a href="chapter-chords-geo-exposures.html#cb157-5" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb157-6"><a href="chapter-chords-geo-exposures.html#cb157-6" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb157-7"><a href="chapter-chords-geo-exposures.html#cb157-7" tabindex="-1"></a><span class="fu">library</span>(logr)</span>
<span id="cb157-8"><a href="chapter-chords-geo-exposures.html#cb157-8" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb157-9"><a href="chapter-chords-geo-exposures.html#cb157-9" tabindex="-1"></a></span>
<span id="cb157-10"><a href="chapter-chords-geo-exposures.html#cb157-10" tabindex="-1"></a><span class="co"># Set location</span></span>
<span id="cb157-11"><a href="chapter-chords-geo-exposures.html#cb157-11" tabindex="-1"></a>here<span class="sc">::</span><span class="fu">i_am</span>(<span class="st">&quot;script_major_road_proximity_for_points.R&quot;</span>)</span>
<span id="cb157-12"><a href="chapter-chords-geo-exposures.html#cb157-12" tabindex="-1"></a></span>
<span id="cb157-13"><a href="chapter-chords-geo-exposures.html#cb157-13" tabindex="-1"></a><span class="co"># Load functions</span></span>
<span id="cb157-14"><a href="chapter-chords-geo-exposures.html#cb157-14" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;script_major_road_proximity_for_points.R&quot;</span>))</span>
<span id="cb157-15"><a href="chapter-chords-geo-exposures.html#cb157-15" tabindex="-1"></a></span>
<span id="cb157-16"><a href="chapter-chords-geo-exposures.html#cb157-16" tabindex="-1"></a><span class="co"># Get exposures</span></span>
<span id="cb157-17"><a href="chapter-chords-geo-exposures.html#cb157-17" tabindex="-1"></a>major_road_proximity_metrics <span class="ot">&lt;-</span></span>
<span id="cb157-18"><a href="chapter-chords-geo-exposures.html#cb157-18" tabindex="-1"></a>  <span class="fu">get_major_road_proximity_for_points</span>(</span>
<span id="cb157-19"><a href="chapter-chords-geo-exposures.html#cb157-19" tabindex="-1"></a>    <span class="at">receptor_filepath =</span> <span class="fu">here</span>(<span class="st">&quot;input_receptor.csv&quot;</span>),</span>
<span id="cb157-20"><a href="chapter-chords-geo-exposures.html#cb157-20" tabindex="-1"></a>    <span class="at">source_major_roads_filepath =</span> <span class="fu">here</span>(<span class="st">&quot;input_source_major_roads.rds&quot;</span>),</span>
<span id="cb157-21"><a href="chapter-chords-geo-exposures.html#cb157-21" tabindex="-1"></a>    <span class="at">us_borders_filepath =</span> <span class="fu">here</span>(<span class="st">&quot;input_us_borders.rds&quot;</span>),</span>
<span id="cb157-22"><a href="chapter-chords-geo-exposures.html#cb157-22" tabindex="-1"></a>    <span class="at">road_class_selection =</span> <span class="st">&quot;highway&quot;</span></span>
<span id="cb157-23"><a href="chapter-chords-geo-exposures.html#cb157-23" tabindex="-1"></a>  )</span>
<span id="cb157-24"><a href="chapter-chords-geo-exposures.html#cb157-24" tabindex="-1"></a></span>
<span id="cb157-25"><a href="chapter-chords-geo-exposures.html#cb157-25" tabindex="-1"></a><span class="co"># Write exposures to CSV</span></span>
<span id="cb157-26"><a href="chapter-chords-geo-exposures.html#cb157-26" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(major_road_proximity_metrics,</span>
<span id="cb157-27"><a href="chapter-chords-geo-exposures.html#cb157-27" tabindex="-1"></a>  <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;output_major_road_proximity_metrics.csv&quot;</span>)</span>
<span id="cb157-28"><a href="chapter-chords-geo-exposures.html#cb157-28" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="step-5-roads" class="section level3 hasAnchor" number="5.4.6">
<h3><span class="header-section-number">5.4.6</span> Review Output<a href="chapter-chords-geo-exposures.html#step-5-roads" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="log-file-2" class="section level4 unnumbered hasAnchor">
<h4>Log File<a href="chapter-chords-geo-exposures.html#log-file-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After running the example script above, with the log file option selected, the log
file will be available in the folder <code>log</code> in the current R working directory.</p>
</div>
<div id="output-data-2" class="section level4 unnumbered hasAnchor">
<h4>Output Data<a href="chapter-chords-geo-exposures.html#output-data-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After running the example script above, calculated proximity-based exposure metrics for receptor locations will be available in the file <code>output_major_road_proximity_metrics.csv</code> within the folder. This CSV file includes a row for each receptor with the following columns (as applicable):</p>
<p><strong>Identifiers</strong></p>
<ul>
<li><code>id</code>: the unique and anonymous identifying code for each receptor</li>
</ul>
<p><strong>Calculated Proximity-Based Exposure Metrics</strong></p>
<p><strong><em>Nearest Distance Metrics</em></strong></p>
<ul>
<li><code>major_road_nearest_distance_km</code>: distance (units: km) to the nearest major road<br />
</li>
<li><code>major_road_nearest_road_class</code>: the classification of the nearest major road segment.</li>
</ul>
<p><strong><em>Length in Buffer Metrics</em></strong></p>
<ul>
<li><code>major_road_length_in_buffer_km</code>: length (units: km) of all major roads of the specified class(es) within the specified buffer distance of receptor. <code>0</code> indicates that no major roads are within the specified buffer distance of the receptor.</li>
</ul>
<p><strong>Information on Data Missingness</strong></p>
<ul>
<li><code>within_border_buffer</code>: binary variable indicating whether receptor point is located within the buffer distance (i.e., specified by argument <code>buffer_distance_km</code>) of a US border with Canada or Mexico:
<ul>
<li><code>1</code> indicates that receptor point is located within the buffer distance of a US border with Canada or Mexico. This indicates that the proximity-based metrics calculated by this tool may represent under predictions of the true proximity-based metrics (i.e., the nearest major road may be located in Canada or Mexico, outside the coverage of the major road data included in this tool).<br />
</li>
<li><code>0</code> indicates that receptor point is <strong>not</strong> located within the buffer distance of a US border with Canada or Mexico.</li>
</ul></li>
</ul>
</div>
</div>
<div id="step-6-roads" class="section level3 hasAnchor" number="5.4.7">
<h3><span class="header-section-number">5.4.7</span> Cite Data and Tool<a href="chapter-chords-geo-exposures.html#step-6-roads" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Please cite the following in any publications based on this tool:</p>
<p><strong>Major Roads Data:</strong></p>
<p>Center for International Earth Science Information Network - CIESIN - Columbia University, and Information Technology Outreach Services - ITOS - University of Georgia. (2013). Global Roads Open Access Data Set, Version 1 (gROADSv1). Palisades, New York: NASA Socioeconomic Data and Applications Center (SEDAC). [Available: <a href="https://doi.org/10.7927/H4VD6WCT" class="uri">https://doi.org/10.7927/H4VD6WCT</a>.] Accessed October 24, 2022.</p>
<p><strong>US Borders:</strong></p>
<p>Homeland Infrastructure Foundation-Level Data (HIFLD) Geoplatform. <em>Canada and US border geospatial data</em>. [Available: <a href="https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform" class="uri">https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform</a>::canada-and-us-border/about]. Accessed: June 23, 2022.</p>
<p>Homeland Infrastructure Foundation-Level Data (HIFLD) Geoplatform. <em>Mexico and US border geospatial data</em>. [Available: <a href="https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform" class="uri">https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform</a>::mexico-and-us-border/about]. Accessed: June 23, 2022.</p>
<p><strong>NIEHS Geospatial Toolbox:</strong></p>
<p><em>Citation to be determined.</em></p>

</div>
</div>
</div>



<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-brokamp2018degauss" class="csl-entry">
Brokamp, Cole. 2018. <span>“<span>DeGAUSS</span>: Decentralized Geomarker Assessment for Multi-Site Studies.”</span> <em>Journal of Open Source Software</em> 3 (30): 812. <a href="https://doi.org/10.21105/joss.00812">https://doi.org/10.21105/joss.00812</a>.
</div>
<div id="ref-r-terra" class="csl-entry">
Hijmans, Robert J. 2024. <em><span class="nocase">terra</span>: Spatial Data Analysis</em>. <a href="https://CRAN.R-project.org/package=terra">https://CRAN.R-project.org/package=terra</a>.
</div>
<div id="ref-r-sf-1" class="csl-entry">
Pebesma, Edzer. 2018. <span>“<span class="nocase">Simple Features for <span>R</span>: Standardized Support for Spatial Vector Data</span>.”</span> <em><span>The R Journal</span></em> 10 (1): 439–46. <a href="https://doi.org/10.32614/RJ-2018-009">https://doi.org/10.32614/RJ-2018-009</a>.
</div>
<div id="ref-r-sf-2" class="csl-entry">
Pebesma, Edzer, and Roger Bivand. 2023. <em>Spatial Data Science: With Applications in <span>R</span></em>. <span>Chapman and Hall/CRC</span>. <a href="https://doi.org/10.1201/9780429459016">https://doi.org/10.1201/9780429459016</a>.
</div>
<div id="ref-r-tidyverse" class="csl-entry">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“Welcome to the <span class="nocase">tidyverse</span>.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-link-to-census.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="case-studies.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
